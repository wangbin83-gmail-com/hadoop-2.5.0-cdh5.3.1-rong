<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Hadoop  2.5.0 Release Notes</title>
<STYLE type="text/css">
	H1 {font-family: sans-serif}
	H2 {font-family: sans-serif; margin-left: 7mm}
	TABLE {margin-left: 7mm}
</STYLE>
</head>
<body>
<h1>Hadoop  2.5.0 Release Notes</h1>
These release notes include new developer and user-facing incompatibilities, features, and major improvements. 
<a name="changes"/>
<h2>Changes since Hadoop 2.4.1</h2>
<ul>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2335">YARN-2335</a>.
     Minor improvement reported by Wei Yan and fixed by Wei Yan <br>
     <b>Annotate all hadoop-sls APIs as @Private</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2319">YARN-2319</a>.
     Major test reported by Wenwu Peng and fixed by Wenwu Peng (resourcemanager)<br>
     <b>Fix MiniKdc not close in TestRMWebServicesDelegationTokens.java</b><br>
     <blockquote>MiniKdc only invoke start method not stop in TestRMWebServicesDelegationTokens.java
{code}
testMiniKDC.start();
{code}

</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2300">YARN-2300</a>.
     Major improvement reported by Varun Vasudev and fixed by Varun Vasudev (documentation)<br>
     <b>Document better sample requests for RM web services for submitting apps</b><br>
     <blockquote>The documentation for RM web services should provide better examples for app submission.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2270">YARN-2270</a>.
     Minor test reported by Ted Yu and fixed by Akira AJISAKA <br>
     <b>TestFSDownload#testDownloadPublicWithStatCache fails in trunk</b><br>
     <blockquote>From https://builds.apache.org/job/Hadoop-yarn-trunk/608/console :
{code}
Running org.apache.hadoop.yarn.util.TestFSDownload
Tests run: 9, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.955 sec &lt;&lt;&lt; FAILURE! - in org.apache.hadoop.yarn.util.TestFSDownload
testDownloadPublicWithStatCache(org.apache.hadoop.yarn.util.TestFSDownload)  Time elapsed: 0.137 sec  &lt;&lt;&lt; FAILURE!
java.lang.AssertionError: null
	at org.junit.Assert.fail(Assert.java:86)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertTrue(Assert.java:52)
	at org.apache.hadoop.yarn.util.TestFSDownload.testDownloadPublicWithStatCache(TestFSDownload.java:363)
{code}
Similar error can be seen here: https://builds.apache.org/job/PreCommit-YARN-Build/4243//testReport/org.apache.hadoop.yarn.util/TestFSDownload/testDownloadPublicWithStatCache/
Looks like future.get() returned null.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2250">YARN-2250</a>.
     Major bug reported by Krisztian Horvath and fixed by Krisztian Horvath (scheduler)<br>
     <b>FairScheduler.findLowestCommonAncestorQueue returns null when queues not identical</b><br>
     <blockquote>We need to update the queue metrics until to lowest common ancestor of the target and source queue. This method fails to retrieve the right queue.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2247">YARN-2247</a>.
     Blocker sub-task reported by Varun Vasudev and fixed by Varun Vasudev <br>
     <b>Allow RM web services users to authenticate using delegation tokens</b><br>
     <blockquote>The RM webapp should allow users to authenticate using delegation tokens to maintain parity with RPC.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2241">YARN-2241</a>.
     Minor bug reported by Robert Kanter and fixed by Robert Kanter (resourcemanager)<br>
     <b>ZKRMStateStore: On startup, show nicer messages if znodes already exist</b><br>
     <blockquote>When using the RMZKStateStore, if you restart the RM, you get a bunch of stack traces with messages like {{org.apache.zookeeper.KeeperException$NodeExistsException: KeeperErrorCode = NodeExists for /rmstore}}.  This is expected as these nodes already exist from before.  We should catch these and print nicer messages.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2233">YARN-2233</a>.
     Blocker sub-task reported by Varun Vasudev and fixed by Varun Vasudev (resourcemanager)<br>
     <b>Implement web services to create, renew and cancel delegation tokens</b><br>
     <blockquote>Implement functionality to create, renew and cancel delegation tokens.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2232">YARN-2232</a>.
     Major bug reported by Varun Vasudev and fixed by Varun Vasudev <br>
     <b>ClientRMService doesn't allow delegation token owner to cancel their own token in secure mode</b><br>
     <blockquote>The ClientRMSerivce doesn't allow delegation token owners to cancel their own tokens. The root cause is this piece of code from the cancelDelegationToken function -
{noformat}
String user = getRenewerForToken(token);
...

private String getRenewerForToken(Token&lt;RMDelegationTokenIdentifier&gt; token) throws IOException {
  UserGroupInformation user = UserGroupInformation.getCurrentUser();
  UserGroupInformation loginUser = UserGroupInformation.getLoginUser();
  // we can always renew our own tokens
  return loginUser.getUserName().equals(user.getUserName())
      ? token.decodeIdentifier().getRenewer().toString()
      : user.getShortUserName();
}
{noformat}

It ends up passing the user short name to the cancelToken function whereas AbstractDelegationTokenSecretManager::cancelToken expects the full user name. This bug occurs in secure mode and is not an issue with simple auth.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2224">YARN-2224</a>.
     Trivial test reported by Anubhav Dhoot and fixed by Anubhav Dhoot (nodemanager)<br>
     <b>Explicitly enable vmem check in TestContainersMonitor#testContainerKillOnMemoryOverflow</b><br>
     <blockquote>If the default setting DEFAULT_NM_VMEM_CHECK_ENABLED is set to false the test will fail. Make the test pass not rely on the default settings but just let it verify that once the setting is turned on it actually does the memory check. See YARN-2225 which suggests we turn the default off.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2216">YARN-2216</a>.
     Minor test reported by Ted Yu and fixed by Zhijie Shen <br>
     <b>TestRMApplicationHistoryWriter sometimes fails in trunk</b><br>
     <blockquote>From https://builds.apache.org/job/Hadoop-Yarn-trunk/595/ :
{code}
testRMWritingMassiveHistory(org.apache.hadoop.yarn.server.resourcemanager.ahs.TestRMApplicationHistoryWriter)  Time elapsed: 33.469 sec  &lt;&lt;&lt; FAILURE!
java.lang.AssertionError: expected:&lt;10000&gt; but was:&lt;7156&gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.junit.Assert.assertEquals(Assert.java:542)
	at org.apache.hadoop.yarn.server.resourcemanager.ahs.TestRMApplicationHistoryWriter.testRMWritingMassiveHistory(TestRMApplicationHistoryWriter.java:430)
	at org.apache.hadoop.yarn.server.resourcemanager.ahs.TestRMApplicationHistoryWriter.testRMWritingMassiveHistory(TestRMApplicationHistoryWriter.java:391)
{code}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2204">YARN-2204</a>.
     Trivial bug reported by Robert Kanter and fixed by Robert Kanter (resourcemanager)<br>
     <b>TestAMRestart#testAMRestartWithExistingContainers assumes CapacityScheduler</b><br>
     <blockquote>TestAMRestart#testAMRestartWithExistingContainers assumes CapacityScheduler</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2201">YARN-2201</a>.
     Major bug reported by Ray Chiang and fixed by Varun Vasudev <br>
     <b>TestRMWebServicesAppsModification dependent on yarn-default.xml</b><br>
     <blockquote>TestRMWebServicesAppsModification.java has some errors that are yarn-default.xml dependent.  By changing yarn-default.xml properties, I'm seeing the following errors:

1) Changing yarn.resourcemanager.scheduler.class from capacity.CapacityScheduler to fair.FairScheduler gives the error:

Running org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification
Tests run: 10, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 79.047 sec &lt;&lt;&lt; FAILURE! - in org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification
testSingleAppKillUnauthorized[1](org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification)  Time elapsed: 3.22 sec  &lt;&lt;&lt; FAILURE!
java.lang.AssertionError: expected:&lt;Forbidden&gt; but was:&lt;Accepted&gt;
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:743)
        at org.junit.Assert.assertEquals(Assert.java:118)
        at org.junit.Assert.assertEquals(Assert.java:144)
        at org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification.testSingleAppKillUnauthorized(TestRMWebServicesAppsModification.java:458)

2) Changing yarn.acl.enable from false to true results in the following errors:

Running org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification
Tests run: 10, Failures: 4, Errors: 0, Skipped: 0, Time elapsed: 49.044 sec &lt;&lt;&lt; FAILURE! - in org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification
testSingleAppKill[0](org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification)  Time elapsed: 2.986 sec  &lt;&lt;&lt; FAILURE!
java.lang.AssertionError: expected:&lt;Accepted&gt; but was:&lt;Unauthorized&gt;
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:743)
        at org.junit.Assert.assertEquals(Assert.java:118)
        at org.junit.Assert.assertEquals(Assert.java:144)
        at org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification.testSingleAppKill(TestRMWebServicesAppsModification.java:287)

testSingleAppKillInvalidState[0](org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification)  Time elapsed: 2.258 sec  &lt;&lt;&lt; FAILURE!
java.lang.AssertionError: expected:&lt;Bad Request&gt; but was:&lt;Unauthorized&gt;
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:743)
        at org.junit.Assert.assertEquals(Assert.java:118)
        at org.junit.Assert.assertEquals(Assert.java:144)
        at org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification.testSingleAppKillInvalidState(TestRMWebServicesAppsModification.java:369)

testSingleAppKillUnauthorized[0](org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification)  Time elapsed: 2.263 sec  &lt;&lt;&lt; FAILURE!
java.lang.AssertionError: expected:&lt;Forbidden&gt; but was:&lt;Unauthorized&gt;
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:743)
        at org.junit.Assert.assertEquals(Assert.java:118)
        at org.junit.Assert.assertEquals(Assert.java:144)
        at org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification.testSingleAppKillUnauthorized(TestRMWebServicesAppsModification.java:458)

testSingleAppKillInvalidId[0](org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification)  Time elapsed: 0.214 sec  &lt;&lt;&lt; FAILURE!
java.lang.AssertionError: expected:&lt;Not Found&gt; but was:&lt;Unauthorized&gt;
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:743)
        at org.junit.Assert.assertEquals(Assert.java:118)
        at org.junit.Assert.assertEquals(Assert.java:144)
        at org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification.testSingleAppKillInvalidId(TestRMWebServicesAppsModification.java:482)

I'm opening this JIRA as a discussion for the best way to fix this.  I've got a few ideas, but I would like to get some feedback about potentially more robust ways to fix this test.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2195">YARN-2195</a>.
     Trivial improvement reported by Wei Yan and fixed by Wei Yan <br>
     <b>Clean a piece of code in ResourceRequest</b><br>
     <blockquote>{code}
if (numContainersComparison == 0) {
  return 0;
} else {
  return numContainersComparison;
}
{code}

This code should be cleaned as 
{code}
return numContainersComparison;
{code}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2192">YARN-2192</a>.
     Major bug reported by Anubhav Dhoot and fixed by Anubhav Dhoot <br>
     <b>TestRMHA fails when run with a mix of Schedulers</b><br>
     <blockquote>If the test is run with FairSchedulers, some of the tests fail because the metricsssytem objects are shared across tests and not destroyed completely.
{code}
Error Message

Metrics source QueueMetrics,q0=root already exists!
Stacktrace

org.apache.hadoop.metrics2.MetricsException: Metrics source QueueMetrics,q0=root already exists!
	at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.newSourceName(DefaultMetricsSystem.java:126)
	at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.sourceName(DefaultMetricsSystem.java:107)
	at org.apache.hadoop.metrics2.impl.MetricsSystemImpl.register(MetricsSystemImpl.java:217)
	at org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FSQueueMetrics.forQueue(FSQueueMetrics.java:96)
	at org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler.reinitialize(FairScheduler.java:1281)
	at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager$RMActiveServices.serviceInit(ResourceManager.java:427)
{code}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2191">YARN-2191</a>.
     Major bug reported by Wangda Tan and fixed by Wangda Tan (resourcemanager)<br>
     <b>Add a test to make sure NM will do application cleanup even if RM restarting happens before application completed</b><br>
     <blockquote>In YARN-1885, there's a test in TestApplicationCleanup#testAppCleanupWhenRestartedAfterAppFinished. However, we need one more test to make sure NM will do app cleanup when restart happens before app finished. The sequence is,
1. Submit app1 to RM1
2. NM1 launches app1's AM (container-0), NM2 launches app1's task containers.
3. Restart RM1
4. Before RM1 finishes restarting, container-0 completed in NM1
5. RM1 finishes restarting, NM1 report container-0 completed, app1 will be completed
6. RM1 should be able to notify NM1/NM2 to cleanup app1.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2187">YARN-2187</a>.
     Major bug reported by Robert Kanter and fixed by Robert Kanter (fairscheduler)<br>
     <b>FairScheduler: Disable max-AM-share check by default</b><br>
     <blockquote>Say you have a small cluster with 8gb memory and 5 queues.  This means that equal queue can have 8gb / 5 = 1.6gb but an AM requires 2gb to start so no AMs can be started.  By default, max-am-share check should be disabled so users don't see a regression. On medium-sized clusters, it still makes sense to set the max-am-share to a value between 0 and 1. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2171">YARN-2171</a>.
     Critical bug reported by Jason Lowe and fixed by Jason Lowe (capacityscheduler)<br>
     <b>AMs block on the CapacityScheduler lock during allocate()</b><br>
     <blockquote>When AMs heartbeat into the RM via the allocate() call they are blocking on the CapacityScheduler lock when trying to get the number of nodes in the cluster via getNumClusterNodes.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2167">YARN-2167</a>.
     Major bug reported by Junping Du and fixed by Junping Du (nodemanager)<br>
     <b>LeveldbIterator should get closed in NMLeveldbStateStoreService#loadLocalizationState() within finally block</b><br>
     <blockquote>In NMLeveldbStateStoreService#loadLocalizationState(), we have LeveldbIterator to read NM's localization state but it is not get closed in finally block. We should close this connection to DB as a common practice. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2163">YARN-2163</a>.
     Minor bug reported by Wangda Tan and fixed by Wangda Tan (resourcemanager , webapp)<br>
     <b>WebUI: Order of AppId in apps table should be consistent with ApplicationId.compareTo().</b><br>
     <blockquote>Currently, AppId is treated as numeric, so the sort result in applications table is sorted by int typed id only (not included cluster timestamp), see attached screenshot. Order of AppId in web page should be consistent with ApplicationId.compareTo().</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2159">YARN-2159</a>.
     Trivial improvement reported by Ray Chiang and fixed by Ray Chiang (resourcemanager)<br>
     <b>Better logging in SchedulerNode#allocateContainer</b><br>
     <blockquote>This bit of code:

{quote}
    LOG.info("Assigned container " + container.getId() + " of capacity "
        + container.getResource() + " on host " + rmNode.getNodeAddress()
        + ", which currently has " + numContainers + " containers, "
        + getUsedResource() + " used and " + getAvailableResource()
        + " available");
{quote}

results in a line like:

{quote}
2014-05-30 16:17:43,573 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FSSchedulerNode: Assigned container container_1400666605555_0009_01_001111 of capacity &lt;memory:1536, vCores:1&gt; on host machine.host.domain.com:8041, which currently has 18 containers, &lt;memory:27648, vCores:18&gt; used and &lt;memory:3072, vCores:0&gt; available
{quote}

That message is fine in most cases, but looks pretty bad after the last available allocation, since it says something like "vCores:0 available".

Here is one suggested phrasing

  - "which has 18 containers, &lt;memory:27648, vCores:18&gt; used and &lt;memory:3072, vCores:0&gt; available after allocation"</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2155">YARN-2155</a>.
     Major bug reported by Wei Yan and fixed by Wei Yan <br>
     <b>FairScheduler: Incorrect threshold check for preemption</b><br>
     <blockquote>{code}
private boolean shouldAttemptPreemption() {
  if (preemptionEnabled) {
    return (preemptionUtilizationThreshold &lt; Math.max(
        (float) rootMetrics.getAvailableMB() / clusterResource.getMemory(),
        (float) rootMetrics.getAvailableVirtualCores() /
            clusterResource.getVirtualCores()));
  }
  return false;
}
{code}

preemptionUtilizationThreshould should be compared with allocatedResource instead of availableResource.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2152">YARN-2152</a>.
     Major sub-task reported by Jian He and fixed by Jian He (resourcemanager)<br>
     <b>Recover missing container information</b><br>
     <blockquote>Container information such as container priority and container start time cannot be recovered because NM container today lacks such container information to send across on NM registration when RM recovery happens</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2148">YARN-2148</a>.
     Major bug reported by Wangda Tan and fixed by Wangda Tan (client)<br>
     <b>TestNMClient failed due more exit code values added and passed to AM</b><br>
     <blockquote>Currently, TestNMClient will be failed in trunk, see https://builds.apache.org/job/PreCommit-YARN-Build/3959/testReport/junit/org.apache.hadoop.yarn.client.api.impl/TestNMClient/testNMClient/
{code}
java.lang.AssertionError: null
	at org.junit.Assert.fail(Assert.java:86)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertTrue(Assert.java:52)
	at org.apache.hadoop.yarn.client.api.impl.TestNMClient.testGetContainerStatus(TestNMClient.java:385)
	at org.apache.hadoop.yarn.client.api.impl.TestNMClient.testContainerManagement(TestNMClient.java:347)
	at org.apache.hadoop.yarn.client.api.impl.TestNMClient.testNMClient(TestNMClient.java:226)
{code}

Test cases in TestNMClient uses following code to verify exit code of COMPLETED containers
{code}
          testGetContainerStatus(container, i, ContainerState.COMPLETE,
              "Container killed by the ApplicationMaster.", Arrays.asList(
                  new Integer[] {137, 143, 0}));
{code}
But YARN-2091 added logic to make exit code reflecting the actual status, so exit code of the "killed by ApplicationMaster" will be -105,
{code}
      if (container.hasDefaultExitCode()) {
        container.exitCode = exitEvent.getExitCode();
      }
{code}

We should update test case as well.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2132">YARN-2132</a>.
     Major bug reported by Karthik Kambatla and fixed by Vamsee Yarlagadda (resourcemanager)<br>
     <b>ZKRMStateStore.ZKAction#runWithRetries doesn't log the exception it encounters</b><br>
     <blockquote>If we encounter any ZooKeeper issues, we don't know what is going on unless we exhaust all the retries. It would really help to log the exception sooner, so we know what is going on with the cluster. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2128">YARN-2128</a>.
     Major bug reported by Wei Yan and fixed by Wei Yan <br>
     <b>FairScheduler: Incorrect calculation of amResource usage</b><br>
     <blockquote>1. The amResource should be normalized instead of fetching from ApplicationSubmissionContext directly.
{code}
    ApplicationSubmissionContext appSubmissionContext =
        rmContext.getRMApps().get(applicationAttemptId.getApplicationId())
            .getApplicationSubmissionContext();
    if (appSubmissionContext != null) {
        amResource = appSubmissionContext.getResource();
        unmanagedAM = appSubmissionContext.getUnmanagedAM();
    }
{code}

2. When one application is removed, the FSLeafQueue's amResourceUsage should be updated only if the app has started its AM.
{code}
  if (runnableAppScheds.remove(app.getAppSchedulable())) {
      // Update AM resource usage
      if (app.getAMResource() != null) {
        Resources.subtractFrom(amResourceUsage, app.getAMResource());
      }
      return true;
  }
{code}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2125">YARN-2125</a>.
     Minor task reported by Wangda Tan and fixed by Wangda Tan (resourcemanager , scheduler)<br>
     <b>ProportionalCapacityPreemptionPolicy should only log CSV when debug enabled</b><br>
     <blockquote>Currently, logToCSV() will be output using LOG.info() in ProportionalCapacityPreemptionPolicy. Which will generate non-human-readable texts in resource manager's log every several seconds, like
{code}
...
2014-06-05 15:57:07,603 INFO org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy:  QUEUESTATE: 1401955027603, a1, 4096, 3, 2048, 2, 4096, 3, 4096, 3, 0, 0, 0, 0, b1, 3072, 2, 1024, 1, 3072, 2, 3072, 2, 0, 0, 0, 0, b2, 3072, 2, 1024, 1, 3072, 2, 3072, 2, 0, 0, 0, 0
2014-06-05 15:57:10,603 INFO org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy:  QUEUESTATE: 1401955030603, a1, 4096, 3, 2048, 2, 4096, 3, 4096, 3, 0, 0, 0, 0, b1, 3072, 2, 1024, 1, 3072, 2, 3072, 2, 0, 0, 0, 0, b2, 3072, 2, 1024, 1, 3072, 2, 3072, 2, 0, 0, 0, 0
...
{code}

It's better to make it output when debug enabled.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2124">YARN-2124</a>.
     Critical bug reported by Wangda Tan and fixed by Wangda Tan (resourcemanager , scheduler)<br>
     <b>ProportionalCapacityPreemptionPolicy cannot work because it's initialized before scheduler initialized</b><br>
     <blockquote>When I play with scheduler with preemption, I found ProportionalCapacityPreemptionPolicy cannot work. NPE will be raised when RM start
{code}
2014-06-05 11:01:33,201 ERROR org.apache.hadoop.yarn.YarnUncaughtExceptionHandler: Thread Thread[SchedulingMonitor (ProportionalCapacityPreemptionPolicy),5,main] threw an Exception.
java.lang.NullPointerException
        at org.apache.hadoop.yarn.util.resource.Resources.greaterThan(Resources.java:225)
        at org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy.computeIdealResourceDistribution(ProportionalCapacityPreemptionPolicy.java:302)
        at org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy.recursivelyComputeIdealAssignment(ProportionalCapacityPreemptionPolicy.java:261)
        at org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy.containerBasedPreemptOrKill(ProportionalCapacityPreemptionPolicy.java:198)
        at org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy.editSchedule(ProportionalCapacityPreemptionPolicy.java:174)
        at org.apache.hadoop.yarn.server.resourcemanager.monitor.SchedulingMonitor.invokePolicy(SchedulingMonitor.java:72)
        at org.apache.hadoop.yarn.server.resourcemanager.monitor.SchedulingMonitor$PreemptionChecker.run(SchedulingMonitor.java:82)
        at java.lang.Thread.run(Thread.java:744)
{code}

This is caused by ProportionalCapacityPreemptionPolicy needs ResourceCalculator from CapacityScheduler. But ProportionalCapacityPreemptionPolicy get initialized before CapacityScheduler initialized. So ResourceCalculator will set to null in ProportionalCapacityPreemptionPolicy. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2122">YARN-2122</a>.
     Major bug reported by Karthik Kambatla and fixed by Robert Kanter (scheduler)<br>
     <b>In AllocationFileLoaderService, the reloadThread should be created in init() and started in start()</b><br>
     <blockquote>AllcoationFileLoaderService has this reloadThread that is currently created and started in start(). Instead, it should be created in init() and started in start().</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2121">YARN-2121</a>.
     Major sub-task reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>TimelineAuthenticator#hasDelegationToken may throw NPE</b><br>
     <blockquote>{code}
  private boolean hasDelegationToken(URL url) {
    return url.getQuery().contains(
        TimelineAuthenticationConsts.DELEGATION_PARAM + "=");
  }
{code}

If the given url doesn't have any params at all. It will throw NPE.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2119">YARN-2119</a>.
     Major bug reported by Anubhav Dhoot and fixed by Anubhav Dhoot <br>
     <b>DEFAULT_PROXY_ADDRESS should use DEFAULT_PROXY_PORT</b><br>
     <blockquote>The fix for [YARN-1590|https://issues.apache.org/jira/browse/YARN-1590] introduced an method to get web proxy bind address with the incorrect default port. Because all the users of the method (only 1 user) ignores the port, its not breaking anything yet. Fixing it in case someone else uses this in the future. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2118">YARN-2118</a>.
     Major sub-task reported by Ted Yu and fixed by Ted Yu <br>
     <b>Type mismatch in contains() check of TimelineWebServices#injectOwnerInfo()</b><br>
     <blockquote>{code}
    if (timelineEntity.getPrimaryFilters() != null &amp;&amp;
        timelineEntity.getPrimaryFilters().containsKey(
            TimelineStore.SystemFilter.ENTITY_OWNER)) {
      throw new YarnException(
{code}
getPrimaryFilters() returns a Map keyed by String.
However, TimelineStore.SystemFilter.ENTITY_OWNER is an enum.
Their types don't match.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2117">YARN-2117</a>.
     Minor sub-task reported by Ted Yu and fixed by Chen He <br>
     <b>Close of Reader in TimelineAuthenticationFilterInitializer#initFilter() should be enclosed in finally block</b><br>
     <blockquote>Here is related code:
{code}
        Reader reader = new FileReader(signatureSecretFile);
        int c = reader.read();
        while (c &gt; -1) {
          secret.append((char) c);
          c = reader.read();
        }
        reader.close();
{code}
If IOException is thrown out of reader.read(), reader would be left unclosed.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2115">YARN-2115</a>.
     Major sub-task reported by Jian He and fixed by Jian He <br>
     <b>Replace RegisterNodeManagerRequest#ContainerStatus with a new NMContainerStatus</b><br>
     <blockquote>This jira is protocol changes only to replace the ContainerStatus sent across via NM register call with a new NMContainerStatus to include all the necessary information for container recovery.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2112">YARN-2112</a>.
     Major bug reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>Hadoop-client is missing jackson libs due to inappropriate configs in pom.xml</b><br>
     <blockquote>Now YarnClient is using TimelineClient, which has dependency on jackson libs. However, the current dependency configurations make the hadoop-client artifect miss 2 jackson libs, such that the applications which have hadoop-client dependency will see the following exception
{code}
java.lang.NoClassDefFoundError: org/codehaus/jackson/jaxrs/JacksonJaxbJsonProvider
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClassCond(ClassLoader.java:637)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
	at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
	at org.apache.hadoop.yarn.client.api.impl.TimelineClientImpl.&lt;init&gt;(TimelineClientImpl.java:92)
	at org.apache.hadoop.yarn.client.api.TimelineClient.createTimelineClient(TimelineClient.java:44)
	at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.serviceInit(YarnClientImpl.java:149)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.mapred.ResourceMgrDelegate.serviceInit(ResourceMgrDelegate.java:94)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.mapred.ResourceMgrDelegate.&lt;init&gt;(ResourceMgrDelegate.java:88)
	at org.apache.hadoop.mapred.YARNRunner.&lt;init&gt;(YARNRunner.java:111)
	at org.apache.hadoop.mapred.YarnClientProtocolProvider.create(YarnClientProtocolProvider.java:34)
	at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:95)
	at org.apache.hadoop.mapreduce.Cluster.&lt;init&gt;(Cluster.java:82)
	at org.apache.hadoop.mapreduce.Cluster.&lt;init&gt;(Cluster.java:75)
	at org.apache.hadoop.mapreduce.Job$9.run(Job.java:1255)
	at org.apache.hadoop.mapreduce.Job$9.run(Job.java:1251)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:394)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1614)
	at org.apache.hadoop.mapreduce.Job.connect(Job.java:1250)
	at org.apache.hadoop.mapreduce.Job.submit(Job.java:1279)
	at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:1303)
	at org.apache.hadoop.examples.QuasiMonteCarlo.estimatePi(QuasiMonteCarlo.java:306)
	at org.apache.hadoop.examples.QuasiMonteCarlo.run(QuasiMonteCarlo.java:354)
	at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
	at org.apache.hadoop.examples.QuasiMonteCarlo.main(QuasiMonteCarlo.java:363)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:72)
	at org.apache.hadoop.util.ProgramDriver.run(ProgramDriver.java:145)
	at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:212)
Caused by: java.lang.ClassNotFoundException: org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider
	at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
	... 48 more
{code}
when using YarnClient to submit an application.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2111">YARN-2111</a>.
     Major bug reported by Sandy Ryza and fixed by Sandy Ryza (scheduler)<br>
     <b>In FairScheduler.attemptScheduling, we don't count containers as assigned if they have 0 memory but non-zero cores</b><br>
     <blockquote>{code}
        if (Resources.greaterThan(RESOURCE_CALCULATOR, clusterResource,
              queueMgr.getRootQueue().assignContainer(node),
              Resources.none())) {
{code}

As RESOURCE_CALCULATOR is a DefaultResourceCalculator, we won't take cores here into account.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2109">YARN-2109</a>.
     Major bug reported by Anubhav Dhoot and fixed by Karthik Kambatla (scheduler)<br>
     <b>Fix TestRM to work with both schedulers</b><br>
     <blockquote>testNMTokenSentForNormalContainer requires CapacityScheduler and was fixed in [YARN-1846|https://issues.apache.org/jira/browse/YARN-1846] to explicitly set it to be CapacityScheduler. But if the default scheduler is set to FairScheduler then the rest of the tests that execute after this will fail with invalid cast exceptions when getting queuemetrics. This is based on test execution order as only the tests that execute after this test will fail. This is because the queuemetrics will be initialized by this test to QueueMetrics and shared by the subsequent tests. 

We can explicitly clear the metrics at the end of this test to fix this.
For example

java.lang.ClassCastException: org.apache.hadoop.yarn.server.resourcemanager.scheduler.QueueMetrics cannot be cast to org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FSQueueMetrics
	at org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FSQueueMetrics.forQueue(FSQueueMetrics.java:103)
	at org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler.reinitialize(FairScheduler.java:1275)
	at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager$RMActiveServices.serviceInit(ResourceManager.java:418)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager.createAndInitActiveServices(ResourceManager.java:808)
	at org.apache.hadoop.yarn.server.resourcemanager.ResourceManager.serviceInit(ResourceManager.java:230)
	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
	at org.apache.hadoop.yarn.server.resourcemanager.MockRM.&lt;init&gt;(MockRM.java:90)
	at org.apache.hadoop.yarn.server.resourcemanager.MockRM.&lt;init&gt;(MockRM.java:85)
	at org.apache.hadoop.yarn.server.resourcemanager.MockRM.&lt;init&gt;(MockRM.java:81)
	at org.apache.hadoop.yarn.server.resourcemanager.TestRM.testNMToken(TestRM.java:232)
</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2107">YARN-2107</a>.
     Major sub-task reported by Vinod Kumar Vavilapalli and fixed by Vinod Kumar Vavilapalli <br>
     <b>Refactor timeline classes into server.timeline package</b><br>
     <blockquote>Right now, most of timeline-server classes are present in an applicationhistoryserver package instead of a top level timeline package.

This is one part of YARN-2043, there is more to do..</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2105">YARN-2105</a>.
     Major test reported by Ted Yu and fixed by Ashwin Shankar <br>
     <b>Fix TestFairScheduler after YARN-2012</b><br>
     <blockquote>The following tests fail in trunk:
{code}
Failed tests:
  TestFairScheduler.testDontAllowUndeclaredPools:2412 expected:&lt;1&gt; but was:&lt;0&gt;

Tests in error:
  TestFairScheduler.testQueuePlacementWithPolicy:624 NullPointer
  TestFairScheduler.testNotUserAsDefaultQueue:530 &#187; NullPointer
{code}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2104">YARN-2104</a>.
     Major bug reported by Wangda Tan and fixed by Wangda Tan (resourcemanager , webapp)<br>
     <b>Scheduler queue filter failed to work because index of queue column changed</b><br>
     <blockquote>YARN-563 added,
{code}
+ th(".type", "Application Type&#8221;).
{code}
to application table, which makes queue&#8217;s column index from 3 to 4. And in scheduler page, queue&#8217;s column index is hard coded to 3 when filter application with queue&#8217;s name,
{code}
          "    if (q == 'root') q = '';",
          "    else q = '^' + q.substr(q.lastIndexOf('.') + 1) + '$';",
          "    $('#apps').dataTable().fnFilter(q, 3, true);",
{code}
So queue filter will not work for application page.

Reproduce steps: (Thanks Bo Yang for pointing this)
{code}
1) In default setup, there&#8217;s a default queue under root queue
2) Run an arbitrary application, you can find it in &#8220;Applications&#8221; page
3) Click &#8220;Default&#8221; queue in scheduler page
4) Click &#8220;Applications&#8221;, no application will show here
5) Click &#8220;Root&#8221; queue in scheduler page
6) Click &#8220;Applications&#8221;, application will show again
{code}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2103">YARN-2103</a>.
     Major bug reported by Binglin Chang and fixed by Binglin Chang <br>
     <b>Inconsistency between viaProto flag and initial value of SerializedExceptionProto.Builder</b><br>
     <blockquote>Bug 1:
{code}
  SerializedExceptionProto proto = SerializedExceptionProto
      .getDefaultInstance();
  SerializedExceptionProto.Builder builder = null;
  boolean viaProto = false;
{code}

Since viaProto is false, we should initiate build rather than proto

Bug 2:
the class does not provide hashcode() and equals() like other PBImpl records, this class is used in other records, it may affect other records' behavior. 

</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2096">YARN-2096</a>.
     Major bug reported by Anubhav Dhoot and fixed by Anubhav Dhoot <br>
     <b>Race in TestRMRestart#testQueueMetricsOnRMRestart</b><br>
     <blockquote>org.apache.hadoop.yarn.server.resourcemanager.TestRMRestart.testQueueMetricsOnRMRestart fails randomly because of a race condition.
The test validates that metrics are incremented, but does not wait for all transitions to finish before checking for the values.
It also resets metrics after kicking off recovery of second RM. The metrics that need to be incremented race with this reset causing test to fail randomly.
We need to wait for the right transitions.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2091">YARN-2091</a>.
     Major task reported by Bikas Saha and fixed by Tsuyoshi OZAWA <br>
     <b>Add more values to ContainerExitStatus and pass it from NM to RM and then to app masters</b><br>
     <blockquote>Currently, the AM cannot programmatically determine if the task was killed due to using excessive memory. The NM kills it without passing this information in the container status back to the RM. So the AM cannot take any action here. The jira tracks adding this exit status and passing it from the NM to the RM and then the AM. In general, there may be other such actions taken by YARN that are currently opaque to the AM. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2089">YARN-2089</a>.
     Major improvement reported by Anubhav Dhoot and fixed by zhihai xu (scheduler)<br>
     <b>FairScheduler: QueuePlacementPolicy and QueuePlacementRule are missing audience annotations</b><br>
     <blockquote>We should mark QueuePlacementPolicy and QueuePlacementRule with audience annotations @Private  @Unstable</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2075">YARN-2075</a>.
     Major bug reported by Zhijie Shen and fixed by Kenji Kikushima <br>
     <b>TestRMAdminCLI consistently fail on trunk and branch-2</b><br>
     <blockquote>{code}
Running org.apache.hadoop.yarn.client.TestRMAdminCLI
Tests run: 13, Failures: 1, Errors: 1, Skipped: 0, Time elapsed: 1.191 sec &lt;&lt;&lt; FAILURE! - in org.apache.hadoop.yarn.client.TestRMAdminCLI
testTransitionToActive(org.apache.hadoop.yarn.client.TestRMAdminCLI)  Time elapsed: 0.082 sec  &lt;&lt;&lt; ERROR!
java.lang.UnsupportedOperationException: null
	at java.util.AbstractList.remove(AbstractList.java:144)
	at java.util.AbstractList$Itr.remove(AbstractList.java:360)
	at java.util.AbstractCollection.remove(AbstractCollection.java:252)
	at org.apache.hadoop.ha.HAAdmin.isOtherTargetNodeActive(HAAdmin.java:173)
	at org.apache.hadoop.ha.HAAdmin.transitionToActive(HAAdmin.java:144)
	at org.apache.hadoop.ha.HAAdmin.runCmd(HAAdmin.java:447)
	at org.apache.hadoop.ha.HAAdmin.run(HAAdmin.java:380)
	at org.apache.hadoop.yarn.client.cli.RMAdminCLI.run(RMAdminCLI.java:318)
	at org.apache.hadoop.yarn.client.TestRMAdminCLI.testTransitionToActive(TestRMAdminCLI.java:180)

testHelp(org.apache.hadoop.yarn.client.TestRMAdminCLI)  Time elapsed: 0.088 sec  &lt;&lt;&lt; FAILURE!
java.lang.AssertionError: null
	at org.junit.Assert.fail(Assert.java:86)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertTrue(Assert.java:52)
	at org.apache.hadoop.yarn.client.TestRMAdminCLI.testError(TestRMAdminCLI.java:366)
	at org.apache.hadoop.yarn.client.TestRMAdminCLI.testHelp(TestRMAdminCLI.java:307)
{code}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2074">YARN-2074</a>.
     Major sub-task reported by Vinod Kumar Vavilapalli and fixed by Jian He (resourcemanager)<br>
     <b>Preemption of AM containers shouldn't count towards AM failures</b><br>
     <blockquote>One orthogonal concern with issues like YARN-2055 and YARN-2022 is that AM containers getting preempted shouldn't count towards AM failures and thus shouldn't eventually fail applications.

We should explicitly handle AM container preemption/kill as a separate issue and not count it towards the limit on AM failures.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2073">YARN-2073</a>.
     Critical bug reported by Karthik Kambatla and fixed by Karthik Kambatla (scheduler)<br>
     <b>Fair Scheduler: Add a utilization threshold to prevent preempting resources when cluster is free</b><br>
     <blockquote>Preemption should kick in only when the currently available slots don't match the request. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2072">YARN-2072</a>.
     Major improvement reported by Nathan Roberts and fixed by Nathan Roberts (nodemanager , resourcemanager , webapp)<br>
     <b>RM/NM UIs and webservices are missing vcore information</b><br>
     <blockquote>Change RM and NM UIs and webservices to include virtual cores.

</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2071">YARN-2071</a>.
     Major sub-task reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>Enforce more restricted permissions for the directory of Leveldb store</b><br>
     <blockquote>We need to enforce more restricted permissions for the directory of Leveldb store, as w did for filesystem generic history store.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2065">YARN-2065</a>.
     Major bug reported by Steve Loughran and fixed by Jian He <br>
     <b>AM cannot create new containers after restart-NM token from previous attempt used</b><br>
     <blockquote>Slider AM Restart failing (SLIDER-34). The AM comes back up, but it cannot create new containers.

The Slider minicluster test {{TestKilledAM}} can replicate this reliably -it kills the AM, then kills a container while the AM is down, which triggers a reallocation of a container, leading to this failure.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2061">YARN-2061</a>.
     Minor improvement reported by Karthik Kambatla and fixed by Ray Chiang (resourcemanager)<br>
     <b>Revisit logging levels in ZKRMStateStore </b><br>
     <blockquote>ZKRMStateStore has a few places where it is logging at the INFO level. We should change these to DEBUG or TRACE level messages.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2059">YARN-2059</a>.
     Major sub-task reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>Extend access control for admin acls</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2054">YARN-2054</a>.
     Major bug reported by Karthik Kambatla and fixed by Karthik Kambatla (resourcemanager)<br>
     <b>Better defaults for YARN ZK configs for retries and retry-inteval when HA is enabled</b><br>
     <blockquote>Currenly, we have the following default values:
# yarn.resourcemanager.zk-num-retries - 500
# yarn.resourcemanager.zk-retry-interval-ms - 2000

This leads to a cumulate 1000 seconds before the RM gives up trying to connect to the ZK. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2052">YARN-2052</a>.
     Major sub-task reported by Tsuyoshi OZAWA and fixed by Tsuyoshi OZAWA (resourcemanager)<br>
     <b>ContainerId creation after work preserving restart is broken</b><br>
     <blockquote>Container ids are made unique by using the app identifier and appending a monotonically increasing sequence number to it. Since container creation is a high churn activity the RM does not store the sequence number per app. So after restart it does not know what the new sequence number should be for new allocations.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2050">YARN-2050</a>.
     Major bug reported by Ming Ma and fixed by Ming Ma <br>
     <b>Fix LogCLIHelpers to create the correct FileContext</b><br>
     <blockquote>LogCLIHelpers calls FileContext.getFileContext() without any parameters. Thus the FileContext created isn't necessarily the FileContext for remote log.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2049">YARN-2049</a>.
     Major sub-task reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>Delegation token stuff for the timeline sever</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2036">YARN-2036</a>.
     Minor bug reported by Karthik Kambatla and fixed by Ray Chiang (documentation)<br>
     <b>Document yarn.resourcemanager.hostname in ClusterSetup</b><br>
     <blockquote>ClusterSetup doesn't talk about yarn.resourcemanager.hostname - most people should just be able to use that directly.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2030">YARN-2030</a>.
     Major improvement reported by Junping Du and fixed by Binglin Chang <br>
     <b>Use StateMachine to simplify handleStoreEvent() in RMStateStore</b><br>
     <blockquote>Now the logic to handle different store events in handleStoreEvent() is as following:
{code}
if (event.getType().equals(RMStateStoreEventType.STORE_APP)
        || event.getType().equals(RMStateStoreEventType.UPDATE_APP)) {
      ...
      if (event.getType().equals(RMStateStoreEventType.STORE_APP)) {
        ...
      } else {
        ...
      }
      ...
      try {
        if (event.getType().equals(RMStateStoreEventType.STORE_APP)) {
          ...
        } else {
          ...
        }
      } 
      ...
    } else if (event.getType().equals(RMStateStoreEventType.STORE_APP_ATTEMPT)
        || event.getType().equals(RMStateStoreEventType.UPDATE_APP_ATTEMPT)) {
      ...
      if (event.getType().equals(RMStateStoreEventType.STORE_APP_ATTEMPT)) {
        ...
      } else {
        ...
      }
        ...
        if (event.getType().equals(RMStateStoreEventType.STORE_APP_ATTEMPT)) {
          ...
        } else {
          ...
        }
      }
      ...
    } else if (event.getType().equals(RMStateStoreEventType.REMOVE_APP)) {
    ...
    } else {
      ...
    }
}
{code}
This is not only confuse people but also led to mistake easily. We may leverage state machine to simply this even no state transitions.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2022">YARN-2022</a>.
     Major sub-task reported by Sunil G and fixed by Sunil G (resourcemanager)<br>
     <b>Preempting an Application Master container can be kept as least priority when multiple applications are marked for preemption by ProportionalCapacityPreemptionPolicy</b><br>
     <blockquote>Cluster Size = 16GB [2NM's]
Queue A Capacity = 50%
Queue B Capacity = 50%
Consider there are 3 applications running in Queue A which has taken the full cluster capacity. 
J1 = 2GB AM + 1GB * 4 Maps
J2 = 2GB AM + 1GB * 4 Maps
J3 = 2GB AM + 1GB * 2 Maps

Another Job J4 is submitted in Queue B [J4 needs a 2GB AM + 1GB * 2 Maps ].
Currently in this scenario, Jobs J3 will get killed including its AM.

It is better if AM can be given least priority among multiple applications. In this same scenario, map tasks from J3 and J2 can be preempted.
Later when cluster is free, maps can be allocated to these Jobs.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2017">YARN-2017</a>.
     Major sub-task reported by Jian He and fixed by Jian He (resourcemanager)<br>
     <b>Merge some of the common lib code in schedulers</b><br>
     <blockquote>A bunch of same code is repeated among schedulers, e.g:  between FicaSchedulerNode and FSSchedulerNode. It's good to merge and share them in a common base.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2012">YARN-2012</a>.
     Major improvement reported by Ashwin Shankar and fixed by Ashwin Shankar (scheduler)<br>
     <b>Fair Scheduler: allow default queue placement rule to take an arbitrary queue</b><br>
     <blockquote>Currently 'default' rule in queue placement policy,if applied,puts the app in root.default queue. It would be great if we can make 'default' rule optionally point to a different queue as default queue .
This default queue can be a leaf queue or it can also be an parent queue if the 'default' rule is nested inside nestedUserQueue rule(YARN-1864).</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-2011">YARN-2011</a>.
     Trivial test reported by Chen He and fixed by Chen He <br>
     <b>Fix typo and warning in TestLeafQueue</b><br>
     <blockquote>a.assignContainers(clusterResource, node_0);
    assertEquals(2*GB, a.getUsedResources().getMemory());
    assertEquals(2*GB, app_0.getCurrentConsumption().getMemory());
    assertEquals(0*GB, app_1.getCurrentConsumption().getMemory());
    assertEquals(0*GB, app_0.getHeadroom().getMemory()); // User limit = 2G
    assertEquals(0*GB, app_0.getHeadroom().getMemory()); // User limit = 2G

    // Again one to user_0 since he hasn't exceeded user limit yet
    a.assignContainers(clusterResource, node_0);
    assertEquals(3*GB, a.getUsedResources().getMemory());
    assertEquals(2*GB, app_0.getCurrentConsumption().getMemory());
    assertEquals(1*GB, app_1.getCurrentConsumption().getMemory());
    assertEquals(0*GB, app_0.getHeadroom().getMemory()); // 3G - 2G
    assertEquals(0*GB, app_0.getHeadroom().getMemory()); // 3G - 2G</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1987">YARN-1987</a>.
     Major improvement reported by Jason Lowe and fixed by Jason Lowe <br>
     <b>Wrapper for leveldb DBIterator to aid in handling database exceptions</b><br>
     <blockquote>Per discussions in YARN-1984 and MAPREDUCE-5652, it would be nice to have a utility wrapper around leveldb's DBIterator to translate the raw RuntimeExceptions it can throw into DBExceptions to make it easier to handle database errors while iterating.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1982">YARN-1982</a>.
     Major sub-task reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>Rename the daemon name to timelineserver</b><br>
     <blockquote>Nowadays, it's confusing that we call the new component timeline server, but we use
{code}
yarn historyserver
yarn-daemon.sh start historyserver
{code}
to start the daemon.

Before the confusion keeps being propagated, we'd better to modify command line asap.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1981">YARN-1981</a>.
     Major bug reported by Jason Lowe and fixed by Jason Lowe (resourcemanager)<br>
     <b>Nodemanager version is not updated when a node reconnects</b><br>
     <blockquote>When a nodemanager is quickly restarted and happens to change versions during the restart (e.g.: rolling upgrade scenario) the NM version as reported by the RM is not updated.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1977">YARN-1977</a>.
     Minor test reported by Junping Du and fixed by Junping Du <br>
     <b>Add tests on getApplicationRequest with filtering start time range</b><br>
     <blockquote>There is no unit test to verify if request with start time range works to get right application list, we should add it.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1970">YARN-1970</a>.
     Minor test reported by Chris Nauroth and fixed by Chris Nauroth <br>
     <b>Prepare YARN codebase for JUnit 4.11.</b><br>
     <blockquote>HADOOP-10503 upgrades the entire Hadoop repo to use JUnit 4.11. Some of the YARN code needs some minor updates to fix deprecation warnings and test isolation problems before the upgrade.
</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1957">YARN-1957</a>.
     Major sub-task reported by Carlo Curino and fixed by Carlo Curino (resourcemanager)<br>
     <b>ProportionalCapacitPreemptionPolicy handling of corner cases...</b><br>
     <blockquote>The current version of ProportionalCapacityPreemptionPolicy should be improved to deal with the following two scenarios:
1) when rebalancing over-capacity allocations, it potentially preempts without considering the maxCapacity constraints of a queue (i.e., preempting possibly more than strictly necessary)
2) a zero capacity queue is preempted even if there is no demand (coherent with old use of zero-capacity to disabled queues)

The proposed patch fixes both issues, and introduce few new test cases.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1940">YARN-1940</a>.
     Major bug reported by Kihwal Lee and fixed by Rushabh S Shah <br>
     <b>deleteAsUser() terminates early without deleting more files on error</b><br>
     <blockquote>In container-executor.c, delete_path() returns early when unlink() against a file or a symlink fails. We have seen many cases of the error being ENOENT, which can safely be ignored during delete.  

This is what we saw recently: An app mistakenly created a large number of files in the local directory and the deletion service failed to delete a significant portion of them due to this bug. Repeatedly hitting this on the same node led to exhaustion of inodes in one of the partitions.

Beside ignoring ENOENT,  delete_path() can simply skip the failed one and continue in some cases, rather than aborting and leaving files behind.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1938">YARN-1938</a>.
     Major sub-task reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>Kerberos authentication for the timeline server</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1937">YARN-1937</a>.
     Major sub-task reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>Add entity-level access control of the timeline data for owners only</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1936">YARN-1936</a>.
     Major sub-task reported by Zhijie Shen and fixed by Zhijie Shen <br>
     <b>Secured timeline client</b><br>
     <blockquote>TimelineClient should be able to talk to the timeline server with kerberos authentication or delegation token</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1931">YARN-1931</a>.
     Blocker bug reported by Thomas Graves and fixed by Sandy Ryza (applications)<br>
     <b>Private API change in YARN-1824 in 2.4 broke compatibility with previous releases</b><br>
     <blockquote>YARN-1824 broke compatibility with previous 2.x releases by changes the API's in org.apache.hadoop.yarn.util.Apps.{setEnvFromInputString,addToEnvironment}  The old api should be added back in.

This affects any ApplicationMasters who were using this api.  It also breaks previously built MapReduce libraries from working with the new Yarn release as MR uses this api. </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1923">YARN-1923</a>.
     Major improvement reported by Anubhav Dhoot and fixed by Anubhav Dhoot (scheduler)<br>
     <b>Make FairScheduler resource ratio calculations terminate faster</b><br>
     <blockquote>In fair scheduler computing shares continues till iterations are complete even when we have a perfect match between the resource shares and total resources. This is because the binary search checks only less or greater and not equals. Add an early termination condition when its equal</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1913">YARN-1913</a>.
     Major bug reported by bc Wong and fixed by Wei Yan (scheduler)<br>
     <b>With Fair Scheduler, cluster can logjam when all resources are consumed by AMs</b><br>
     <blockquote>It's possible to deadlock a cluster by submitting many applications at once, and have all cluster resources taken up by AMs.

One solution is for the scheduler to limit resources taken up by AMs, as a percentage of total cluster resources, via a "maxApplicationMasterShare" config.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1889">YARN-1889</a>.
     Minor improvement reported by Hong Zhiguo and fixed by Hong Zhiguo (scheduler)<br>
     <b>In Fair Scheduler, avoid creating objects on each call to AppSchedulable comparator</b><br>
     <blockquote>In fair scheduler, in each scheduling attempt, a full sort is
performed on List of AppSchedulable, which invokes Comparator.compare
method many times. Both FairShareComparator and DRFComparator call
AppSchedulable.getWeights, and AppSchedulable.getPriority.

A new ResourceWeights object is allocated on each call of getWeights,
and the same for getPriority. This introduces a lot of pressure to
GC because these methods are called very very frequently.

Below test case shows improvement on performance and GC behaviour. The results show that the GC pressure during processing NodeUpdate is recuded half by this patch.

The code to show the improvement: (Add it to TestFairScheduler.java)

{code}
import java.lang.management.GarbageCollectorMXBean;
import java.lang.management.ManagementFactory;
  public void printGCStats() {
    long totalGarbageCollections = 0;
    long garbageCollectionTime = 0;

    for(GarbageCollectorMXBean gc :
      ManagementFactory.getGarbageCollectorMXBeans()) {
      long count = gc.getCollectionCount();
      if(count &gt;= 0) {
        totalGarbageCollections += count;
      }

      long time = gc.getCollectionTime();
      if(time &gt;= 0) {
        garbageCollectionTime += time;
      }
    }

    System.out.println("Total Garbage Collections: "
        + totalGarbageCollections);
    System.out.println("Total Garbage Collection Time (ms): "
        + garbageCollectionTime);
  }

  @Test
  public void testImpactOnGC() throws Exception {
    scheduler.reinitialize(conf, resourceManager.getRMContext());

    // Add nodes
    int numNode = 10000;

    for (int i = 0; i &lt; numNode; ++i) {
        String host = String.format("192.1.%d.%d", i/256, i%256);
        RMNode node =
            MockNodes.newNodeInfo(1, Resources.createResource(1024 * 64), i, host);
        NodeAddedSchedulerEvent nodeEvent = new NodeAddedSchedulerEvent(node);
        scheduler.handle(nodeEvent);
        assertEquals(1024 * 64 * (i+1), scheduler.getClusterCapacity().getMemory());
    }
    assertEquals(numNode, scheduler.getNumClusterNodes());
    assertEquals(1024 * 64 * numNode, scheduler.getClusterCapacity().getMemory());

    // add apps, each app has 100 containers.
    int minReqSize =
        FairSchedulerConfiguration.DEFAULT_RM_SCHEDULER_INCREMENT_ALLOCATION_MB;
    int numApp = 8000;
    int priority = 1;

    for (int i = 1; i &lt; numApp + 1; ++i) {
        ApplicationAttemptId attemptId = createAppAttemptId(i, 1);
        AppAddedSchedulerEvent appAddedEvent = new AppAddedSchedulerEvent(
                        attemptId.getApplicationId(), "queue1", "user1");
        scheduler.handle(appAddedEvent);
        AppAttemptAddedSchedulerEvent attemptAddedEvent =
            new AppAttemptAddedSchedulerEvent(attemptId, false);
        scheduler.handle(attemptAddedEvent);
        createSchedulingRequestExistingApplication(minReqSize * 2, 1, priority, attemptId);
    }
    scheduler.update();

    assertEquals(numApp, scheduler.getQueueManager().getLeafQueue("queue1", true)
        .getRunnableAppSchedulables().size());

    System.out.println("GC stats before NodeUpdate processing:");
    printGCStats();
    int hb_num = 5000;
    long start = System.nanoTime();
    for (int i = 0; i &lt; hb_num; ++i) {
      String host = String.format("192.1.%d.%d", i/256, i%256);
      RMNode node =
          MockNodes.newNodeInfo(1, Resources.createResource(1024 * 64), 5000, host);
      NodeUpdateSchedulerEvent nodeEvent = new NodeUpdateSchedulerEvent(node);
      scheduler.handle(nodeEvent);
    }
    long end = System.nanoTime();

    System.out.printf("processing time for a NodeUpdate in average: %d us\n",
                (end - start)/(hb_num * 1000));

    System.out.println("GC stats after NodeUpdate processing:");
    printGCStats();
  }

{code}
</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1885">YARN-1885</a>.
     Major bug reported by Arpit Gupta and fixed by Wangda Tan <br>
     <b>RM may not send the app-finished signal after RM restart to some nodes where the application ran before RM restarts</b><br>
     <blockquote>During our HA testing we have seen cases where yarn application logs are not available through the cli but i can look at AM logs through the UI. RM was also being restarted in the background as the application was running.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1877">YARN-1877</a>.
     Critical sub-task reported by Karthik Kambatla and fixed by Robert Kanter (resourcemanager)<br>
     <b>Document yarn.resourcemanager.zk-auth and its scope</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1870">YARN-1870</a>.
     Minor improvement reported by Ted Yu and fixed by Fengdong Yu (resourcemanager)<br>
     <b>FileInputStream is not closed in ProcfsBasedProcessTree#constructProcessSMAPInfo()</b><br>
     <blockquote>{code}
      List&lt;String&gt; lines = IOUtils.readLines(new FileInputStream(file));
{code}
FileInputStream is not closed.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1868">YARN-1868</a>.
     Major bug reported by Chuan Liu and fixed by Chuan Liu (webapp)<br>
     <b>YARN status web ui does not show correctly in IE 11</b><br>
     <blockquote>The YARN status web ui does not show correctly in IE 11. The drop down menu for app entries are not shown. Also the navigation menu displays incorrectly.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1865">YARN-1865</a>.
     Minor bug reported by Remus Rusanu and fixed by Remus Rusanu (nodemanager)<br>
     <b>ShellScriptBuilder does not check for some error conditions</b><br>
     <blockquote>The WindowsShellScriptBuilder does not check for commands exceeding windows maximum shell command line length (8191 chars)
Neither Unix  nor Windows script builder do not check for error condition after mkdir nor link
WindowsShellScriptBuilder mkdir is not safe with regard to paths containing spaces</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1864">YARN-1864</a>.
     Major new feature reported by Ashwin Shankar and fixed by Ashwin Shankar (scheduler)<br>
     <b>Fair Scheduler Dynamic Hierarchical User Queues</b><br>
     <blockquote>In Fair Scheduler, we want to be able to create user queues under any parent queue in the hierarchy. For eg. Say user1 submits a job to a parent queue called root.allUserQueues, we want be able to create a new queue called root.allUserQueues.user1 and run user1's job in it.Any further jobs submitted by this user to root.allUserQueues will be run in this newly created root.allUserQueues.user1.
This is very similar to the 'user-as-default' feature in Fair Scheduler which creates user queues under root queue. But we want the ability to create user queues under ANY parent queue.

Why do we want this ?
1. Preemption : these dynamically created user queues can preempt each other if its fair share is not met. So there is fairness among users.
User queues can also preempt other non-user leaf queue as well if below fair share.
2. Allocation to user queues : we want all the user queries(adhoc) to consume only a fraction of resources in the shared cluster. By creating this feature,we could do that by giving a fair share to the parent user queue which is then redistributed to all the dynamically created user queues.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1845">YARN-1845</a>.
     Major improvement reported by Rushabh S Shah and fixed by Rushabh S Shah <br>
     <b> Elapsed time for failed tasks that never started is  wrong </b><br>
     <blockquote>The elapsed time for tasks in a failed job that were never
started can be way off.  It looks like we're marking the start time as the
beginning of the epoch (i.e.: start time = -1) but the finish time is when the
task was marked as failed when the whole job failed.  That causes the
calculated elapsed time of the task to be a ridiculous number of hours.

Tasks that fail without any attempts shouldn't have start/finish/elapsed times.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1833">YARN-1833</a>.
     Major bug reported by Mit Desai and fixed by Mit Desai <br>
     <b>TestRMAdminService Fails in trunk and branch-2 : Assert Fails due to different count of UserGroups for currentUser()</b><br>
     <blockquote>In the test testRefreshUserToGroupsMappingsWithFileSystemBasedConfigurationProvider, the following assert is not needed.

{code}
Assert.assertTrue(groupWithInit.size() != groupBefore.size());
{code}

As the assert takes the default groups for groupWithInit (which in my case are users, sshusers and wheel), it fails as the size of both groupWithInit and groupBefore are same.

I do not think we need to have this assert here. Moreover we are also checking that the groupInit does not have the userGroups that are in the groupBefore so removing the assert may not be harmful.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1790">YARN-1790</a>.
     Major bug reported by bc Wong and fixed by bc Wong <br>
     <b>Fair Scheduler UI not showing apps table</b><br>
     <blockquote>There is a running job, which shows up in the summary table in the FairScheduler UI, the queue display, etc. Just not in the apps table at the bottom.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1784">YARN-1784</a>.
     Minor bug reported by Karthik Kambatla and fixed by Robert Kanter (resourcemanager)<br>
     <b>TestContainerAllocation assumes CapacityScheduler</b><br>
     <blockquote>TestContainerAllocation assumes CapacityScheduler</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1771">YARN-1771</a>.
     Critical improvement reported by Sangjin Lee and fixed by Sangjin Lee (nodemanager)<br>
     <b>many getFileStatus calls made from node manager for localizing a public distributed cache resource</b><br>
     <blockquote>We're observing that the getFileStatus calls are putting a fair amount of load on the name node as part of checking the public-ness for localizing a resource that belong in the public cache.

We see 7 getFileStatus calls made for each of these resource. We should look into reducing the number of calls to the name node. One example:

{noformat}
2014-02-27 18:07:27,351 INFO audit: ... cmd=getfileinfo	src=/tmp/temp-887708724/tmp883330348/foo-0.0.44.jar ...
2014-02-27 18:07:27,352 INFO audit: ... cmd=getfileinfo	src=/tmp/temp-887708724/tmp883330348/foo-0.0.44.jar ...
2014-02-27 18:07:27,352 INFO audit: ... cmd=getfileinfo	src=/tmp/temp-887708724/tmp883330348 ...
2014-02-27 18:07:27,353 INFO audit: ... cmd=getfileinfo	src=/tmp/temp-887708724 ...
2014-02-27 18:07:27,353 INFO audit: ... cmd=getfileinfo	src=/tmp ...
2014-02-27 18:07:27,354 INFO audit: ... cmd=getfileinfo	src=/	 ...
2014-02-27 18:07:27,354 INFO audit: ... cmd=getfileinfo	src=/tmp/temp-887708724/tmp883330348/foo-0.0.44.jar ...
2014-02-27 18:07:27,355 INFO audit: ... cmd=open	src=/tmp/temp-887708724/tmp883330348/foo-0.0.44.jar ...
{noformat}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1757">YARN-1757</a>.
     Major sub-task reported by Jason Lowe and fixed by Jason Lowe (nodemanager)<br>
     <b>NM Recovery. Auxiliary service support.</b><br>
     <blockquote>There needs to be a mechanism for communicating to auxiliary services whether nodemanager recovery is enabled and where they should store their state.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1751">YARN-1751</a>.
     Major improvement reported by Ming Ma and fixed by Ming Ma (nodemanager)<br>
     <b>Improve MiniYarnCluster for log aggregation testing</b><br>
     <blockquote>MiniYarnCluster specifies individual remote log aggregation root dir for each NM. Test code that uses MiniYarnCluster won't be able to get the value of log aggregation root dir. The following code isn't necessary in MiniYarnCluster.

      File remoteLogDir =
          new File(testWorkDir, MiniYARNCluster.this.getName()
              + "-remoteLogDir-nm-" + index);
      remoteLogDir.mkdir();
      config.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,
          remoteLogDir.getAbsolutePath());

In LogCLIHelpers.java, dumpAllContainersLogs should pass its conf object to FileContext.getFileContext() call.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1736">YARN-1736</a>.
     Minor bug reported by Sandy Ryza and fixed by Naren Koneru (scheduler)<br>
     <b>FS: AppSchedulable.assignContainer's priority argument is redundant</b><br>
     <blockquote>The ResourceRequest includes a Priority, so no need to pass in a Priority alongside it</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1726">YARN-1726</a>.
     Blocker bug reported by Wei Yan and fixed by Wei Yan <br>
     <b>ResourceSchedulerWrapper broken due to AbstractYarnScheduler</b><br>
     <blockquote>The YARN scheduler simulator failed when running Fair Scheduler, due to AbstractYarnScheduler introduced in YARN-1041. The ResourceSchedulerWrapper should inherit AbstractYarnScheduler, instead of implementing ResourceScheduler interface directly.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1718">YARN-1718</a>.
     Major bug reported by Sandy Ryza and fixed by Sandy Ryza (scheduler)<br>
     <b>Fix a couple isTerminals in Fair Scheduler queue placement rules </b><br>
     <blockquote>SecondaryGroupExistingQueue and Default are incorrect</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1713">YARN-1713</a>.
     Blocker sub-task reported by Varun Vasudev and fixed by Varun Vasudev <br>
     <b>Implement getnewapplication and submitapp as part of RM web service</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1702">YARN-1702</a>.
     Major sub-task reported by Varun Vasudev and fixed by Varun Vasudev <br>
     <b>Expose kill app functionality as part of RM web services</b><br>
     <blockquote>Expose functionality to kill an app via the ResourceManager web services API.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1678">YARN-1678</a>.
     Major bug reported by Sandy Ryza and fixed by Sandy Ryza (scheduler)<br>
     <b>Fair scheduler gabs incessantly about reservations</b><br>
     <blockquote>Come on FS. We really don't need to know every time a node with a reservation on it heartbeats.

{code}
2014-01-29 03:48:16,043 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler: Trying to fulfill reservation for application appattempt_1390547864213_0347_000001 on node: host: a2330.halxg.cloudera.com:8041 #containers=8 available=&lt;memory:0, vCores:8&gt; used=&lt;memory:8192, vCores:8&gt;
2014-01-29 03:48:16,043 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.AppSchedulable: Making reservation: node=a2330.halxg.cloudera.com app_id=application_1390547864213_0347
2014-01-29 03:48:16,043 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.SchedulerApplicationAttempt: Application application_1390547864213_0347 reserved container container_1390547864213_0347_01_000003 on node host: a2330.halxg.cloudera.com:8041 #containers=8 available=&lt;memory:0, vCores:8&gt; used=&lt;memory:8192, vCores:8&gt;, currently has 6 at priority 0; currentReservation 6144
2014-01-29 03:48:16,044 INFO org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FSSchedulerNode: Updated reserved container container_1390547864213_0347_01_000003 on node host: a2330.halxg.cloudera.com:8041 #containers=8 available=&lt;memory:0, vCores:8&gt; used=&lt;memory:8192, vCores:8&gt; for application org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FSSchedulerApp@1cb01d20
{code}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1670">YARN-1670</a>.
     Critical bug reported by Thomas Graves and fixed by Mit Desai <br>
     <b>aggregated log writer can write more log data then it says is the log length</b><br>
     <blockquote>We have seen exceptions when using 'yarn logs' to read log files. 
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
       at java.lang.Long.parseLong(Long.java:441)
       at java.lang.Long.parseLong(Long.java:483)
       at org.apache.hadoop.yarn.logaggregation.AggregatedLogFormat$LogReader.readAContainerLogsForALogType(AggregatedLogFormat.java:518)
       at org.apache.hadoop.yarn.logaggregation.LogDumper.dumpAContainerLogs(LogDumper.java:178)
       at org.apache.hadoop.yarn.logaggregation.LogDumper.run(LogDumper.java:130)
       at org.apache.hadoop.yarn.logaggregation.LogDumper.main(LogDumper.java:246)


We traced it down to the reader trying to read the file type of the next file but where it reads is still log data from the previous file.  What happened was the Log Length was written as a certain size but the log data was actually longer then that.  

Inside of the write() routine in LogValue it first writes what the logfile length is, but then when it goes to write the log itself it just goes to the end of the file.  There is a race condition here where if someone is still writing to the file when it goes to be aggregated the length written could be to small.

We should have the write() routine stop when it writes whatever it said was the length.  It would be nice if we could somehow tell the user it might be truncated but I'm not sure of a good way to do this.

We also noticed that a bug in readAContainerLogsForALogType where it is using an int for curRead whereas it should be using a long. 

      while (len != -1 &amp;&amp; curRead &lt; fileLength) {

This isn't actually a problem right now as it looks like the underlying decoder is doing the right thing and the len condition exits.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1561">YARN-1561</a>.
     Minor improvement reported by Junping Du and fixed by Chen He (scheduler)<br>
     <b>Fix a generic type warning in FairScheduler</b><br>
     <blockquote>The Comparator below should be specified with type:
private Comparator nodeAvailableResourceComparator =
          new NodeAvailableResourceComparator(); </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1550">YARN-1550</a>.
     Critical bug reported by caolong and fixed by Anubhav Dhoot (scheduler)<br>
     <b>NPE in FairSchedulerAppsBlock#render</b><br>
     <blockquote>three Steps :
1&#12289;debug at RMAppManager#submitApplication after code
if (rmContext.getRMApps().putIfAbsent(applicationId, application) !=
        null) {
      String message = "Application with id " + applicationId
          + " is already present! Cannot add a duplicate!";
      LOG.warn(message);
      throw RPCUtil.getRemoteException(message);
    }

2&#12289;submit one application:hadoop jar ~/hadoop-current/share/hadoop/mapreduce/hadoop-mapreduce-client-jobclient-2.0.0-ydh2.2.0-tests.jar sleep -Dhadoop.job.ugi=test2,#111111 -Dmapreduce.job.queuename=p1 -m 1 -mt 1 -r 1

3&#12289;go in page :http://ip:50030/cluster/scheduler and find 500 ERROR&#65281;

the log:
{noformat}
2013-12-30 11:51:43,795 ERROR org.apache.hadoop.yarn.webapp.Dispatcher: error handling URI: /cluster/scheduler
java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        ....
Caused by: java.lang.NullPointerException
	at org.apache.hadoop.yarn.server.resourcemanager.webapp.FairSchedulerAppsBlock.render(FairSchedulerAppsBlock.java:96)
	at org.apache.hadoop.yarn.webapp.view.HtmlBlock.render(HtmlBlock.java:66)
	at org.apache.hadoop.yarn.webapp.view.HtmlBlock.renderPartial(HtmlBlock.java:76)
{noformat}</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1520">YARN-1520</a>.
     Major bug reported by Chen He and fixed by Chen He <br>
     <b>update capacity scheduler docs to include necessary parameters</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1479">YARN-1479</a>.
     Major improvement reported by Kendall Thrapp and fixed by Chen He <br>
     <b>Invalid NaN values in Hadoop REST API JSON response</b><br>
     <blockquote>I've been occasionally coming across instances where Hadoop's Cluster Applications REST API (http://hadoop.apache.org/docs/r0.23.6/hadoop-yarn/hadoop-yarn-site/ResourceManagerRest.html#Cluster_Applications_API) has returned JSON that PHP's json_decode function failed to parse.  I've tracked the syntax error down to the presence of the unquoted word NaN appearing as a value in the JSON.  For example:

"progress":NaN,

NaN is not part of the JSON spec, so its presence renders the whole JSON string invalid.  Hadoop needs to return something other than NaN in this case -- perhaps an empty string or the quoted string "NaN".</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1474">YARN-1474</a>.
     Major sub-task reported by Sandy Ryza and fixed by Tsuyoshi OZAWA (scheduler)<br>
     <b>Make schedulers services</b><br>
     <blockquote>Schedulers currently have a reinitialize but no start and stop.  Fitting them into the YARN service model would make things more coherent.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1429">YARN-1429</a>.
     Trivial bug reported by Sandy Ryza and fixed by Jarek Jarcec Cecho (client)<br>
     <b>*nix: Allow a way for users to augment classpath of YARN daemons</b><br>
     <blockquote>YARN_CLASSPATH is referenced in the comments in ./hadoop-yarn-project/hadoop-yarn/bin/yarn and ./hadoop-yarn-project/hadoop-yarn/bin/yarn.cmd, but doesn't do anything.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1424">YARN-1424</a>.
     Minor improvement reported by Sandy Ryza and fixed by Ray Chiang (resourcemanager)<br>
     <b>RMAppAttemptImpl should return the DummyApplicationResourceUsageReport for all invalid accesses</b><br>
     <blockquote>RMAppImpl has a DUMMY_APPLICATION_RESOURCE_USAGE_REPORT to return when the caller of createAndGetApplicationReport doesn't have access.

RMAppAttemptImpl should have something similar for getApplicationResourceUsageReport.

It also might make sense to put the dummy report into ApplicationResourceUsageReport and allow both to use it.

A test would also be useful to verify that RMAppAttemptImpl#getApplicationResourceUsageReport doesn't return null if the scheduler doesn't have a report to return.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1408">YARN-1408</a>.
     Major sub-task reported by Sunil G and fixed by Sunil G (resourcemanager)<br>
     <b>Preemption caused Invalid State Event: ACQUIRED at KILLED and caused a task timeout for 30mins</b><br>
     <blockquote>Capacity preemption is enabled as follows.
 *  yarn.resourcemanager.scheduler.monitor.enable= true ,
 *  yarn.resourcemanager.scheduler.monitor.policies=org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy

Queue = a,b
Capacity of Queue A = 80%
Capacity of Queue B = 20%

Step 1: Assign a big jobA on queue a which uses full cluster capacity
Step 2: Submitted a jobB to queue b  which would use less than 20% of cluster capacity

JobA task which uses queue b capcity is been preempted and killed.

This caused below problem:
1. New Container has got allocated for jobA in Queue A as per node update from an NM.
2. This container has been preempted immediately as per preemption.

Here ACQUIRED at KILLED Invalid State exception came when the next AM heartbeat reached RM.
ERROR org.apache.hadoop.yarn.server.resourcemanager.rmcontainer.RMContainerImpl: Can't handle this event at current state
org.apache.hadoop.yarn.state.InvalidStateTransitonException: Invalid event: ACQUIRED at KILLED

This also caused the Task to go for a timeout for 30minutes as this Container was already killed by preemption.
attempt_1380289782418_0003_m_000000_0 Timed out after 1800 secs

</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1368">YARN-1368</a>.
     Major sub-task reported by Bikas Saha and fixed by Jian He <br>
     <b>Common work to re-populate&#160;containers&#8217; state into scheduler</b><br>
     <blockquote>YARN-1367 adds support for the NM to tell the RM about all currently running containers upon registration. The RM needs to send this information to the schedulers along with the NODE_ADDED_EVENT so that the schedulers can recover the current allocation state of the cluster.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1366">YARN-1366</a>.
     Major sub-task reported by Bikas Saha and fixed by Rohith (resourcemanager)<br>
     <b>AM should implement Resync with the ApplicationMasterService instead of shutting down</b><br>
     <blockquote>The ApplicationMasterService currently sends a resync response to which the AM responds by shutting down. The AM behavior is expected to change to calling resyncing with the RM. Resync means resetting the allocate RPC sequence number to 0 and the AM should send its entire outstanding request to the RM. Note that if the AM is making its first allocate call to the RM then things should proceed like normal without needing a resync. The RM will return all containers that have completed since the RM last synced with the AM. Some container completions may be reported more than once.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1365">YARN-1365</a>.
     Major sub-task reported by Bikas Saha and fixed by Anubhav Dhoot (resourcemanager)<br>
     <b>ApplicationMasterService to allow Register of an app that was running before restart</b><br>
     <blockquote>For an application that was running before restart, the ApplicationMasterService currently throws an exception when the app tries to make the initial register or final unregister call. These should succeed and the RMApp state machine should transition to completed like normal. Unregistration should succeed for an app that the RM considers complete since the RM may have died after saving completion in the store but before notifying the AM that the AM is free to exit.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1362">YARN-1362</a>.
     Major sub-task reported by Jason Lowe and fixed by Jason Lowe (nodemanager)<br>
     <b>Distinguish between nodemanager shutdown for decommission vs shutdown for restart</b><br>
     <blockquote>When a nodemanager shuts down it needs to determine if it is likely to be restarted.  If a restart is likely then it needs to preserve container directories, logs, distributed cache entries, etc.  If it is being shutdown more permanently (e.g.: like a decommission) then the nodemanager should cleanup directories and logs.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1339">YARN-1339</a>.
     Major sub-task reported by Jason Lowe and fixed by Jason Lowe (nodemanager)<br>
     <b>Recover DeletionService state upon nodemanager restart</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1338">YARN-1338</a>.
     Major sub-task reported by Jason Lowe and fixed by Jason Lowe (nodemanager)<br>
     <b>Recover localized resource cache state upon nodemanager restart</b><br>
     <blockquote>Today when node manager restarts we clean up all the distributed cache files from disk. This is definitely not ideal from 2 aspects.
* For work preserving restart we definitely want them as running containers are using them
* For even non work preserving restart this will be useful in the sense that we don't have to download them again if needed by future tasks.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-1136">YARN-1136</a>.
     Major bug reported by Karthik Kambatla and fixed by Chen He <br>
     <b>Replace junit.framework.Assert with org.junit.Assert</b><br>
     <blockquote>There are several places where we are using junit.framework.Assert instead of org.junit.Assert.

{code}grep -rn "junit.framework.Assert" hadoop-yarn-project/ --include=*.java{code} </blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-738">YARN-738</a>.
     Major bug reported by Omkar Vinit Joshi and fixed by Ming Ma <br>
     <b>TestClientRMTokens is failing irregularly while running all yarn tests</b><br>
     <blockquote>Running org.apache.hadoop.yarn.server.resourcemanager.TestClientRMTokens
Tests run: 6, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 16.787 sec &lt;&lt;&lt; FAILURE!
testShortCircuitRenewCancel(org.apache.hadoop.yarn.server.resourcemanager.TestClientRMTokens)  Time elapsed: 186 sec  &lt;&lt;&lt; ERROR!
java.lang.RuntimeException: getProxy
	at org.apache.hadoop.yarn.server.resourcemanager.TestClientRMTokens$YarnBadRPC.getProxy(TestClientRMTokens.java:334)
	at org.apache.hadoop.yarn.security.client.RMDelegationTokenIdentifier$Renewer.getRmClient(RMDelegationTokenIdentifier.java:157)
	at org.apache.hadoop.yarn.security.client.RMDelegationTokenIdentifier$Renewer.renew(RMDelegationTokenIdentifier.java:102)
	at org.apache.hadoop.security.token.Token.renew(Token.java:372)
	at org.apache.hadoop.yarn.server.resourcemanager.TestClientRMTokens.checkShortCircuitRenewCancel(TestClientRMTokens.java:306)
	at org.apache.hadoop.yarn.server.resourcemanager.TestClientRMTokens.testShortCircuitRenewCancel(TestClientRMTokens.java:240)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-614">YARN-614</a>.
     Major improvement reported by Bikas Saha and fixed by Xuan Gong <br>
     <b>Separate AM failures from hardware failure or YARN error and do not count them to AM retry count</b><br>
     <blockquote>Attempts can fail due to a large number of user errors and they should not be retried unnecessarily. The only reason YARN should retry an attempt is when the hardware fails or YARN has an error. NM failing, lost NM and NM disk errors are the hardware errors that come to mind.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-596">YARN-596</a>.
     Major bug reported by Sandy Ryza and fixed by Wei Yan (scheduler)<br>
     <b>Use scheduling policies throughout the queue hierarchy to decide which containers to preempt</b><br>
     <blockquote>In the fair scheduler, containers are chosen for preemption in the following way:
All containers for all apps that are in queues that are over their fair share are put in a list.
The list is sorted in order of the priority that the container was requested in.

This means that an application can shield itself from preemption by requesting it's containers at higher priorities, which doesn't really make sense.

Also, an application that is not over its fair share, but that is in a queue that is over it's fair share is just as likely to have containers preempted as an application that is over its fair share.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/YARN-483">YARN-483</a>.
     Major improvement reported by Sandy Ryza and fixed by Akira AJISAKA (documentation)<br>
     <b>Improve documentation on log aggregation in yarn-default.xml</b><br>
     <blockquote>The current documentation for log aggregation is 

{code}
  &lt;property&gt;
    &lt;description&gt;Whether to enable log aggregation&lt;/description&gt;
    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;
    &lt;value&gt;false&lt;/value&gt;
  &lt;/property&gt;
{code}

This could be improved to explain what enabling log aggregation does.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-6002">MAPREDUCE-6002</a>.
     Major bug reported by Wangda Tan and fixed by Wangda Tan (task)<br>
     <b>MR task should prevent report error to AM when process is shutting down</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5952">MAPREDUCE-5952</a>.
     Blocker bug reported by Gera Shegalov and fixed by Gera Shegalov (mr-am , mrv2)<br>
     <b>LocalContainerLauncher#renameMapOutputForReduce incorrectly assumes a single dir for mapOutIndex</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5939">MAPREDUCE-5939</a>.
     Major bug reported by Kihwal Lee and fixed by Chen He <br>
     <b>StartTime showing up as the epoch time in JHS UI after upgrade</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5924">MAPREDUCE-5924</a>.
     Major bug reported by Yesha Vora and fixed by Zhijie Shen <br>
     <b>Windows: Sort Job failed due to 'Invalid event: TA_COMMIT_PENDING at COMMIT_PENDING'</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5920">MAPREDUCE-5920</a>.
     Minor bug reported by Uma Maheswara Rao G and fixed by Yi Liu (distcp , documentation)<br>
     <b>Add Xattr option in DistCp docs </b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5900">MAPREDUCE-5900</a>.
     Major sub-task reported by Mayank Bansal and fixed by Mayank Bansal (applicationmaster , mr-am , mrv2)<br>
     <b>Container preemption interpreted as task failures and eventually job failures </b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5899">MAPREDUCE-5899</a>.
     Major improvement reported by Jing Zhao and fixed by Jing Zhao (distcp)<br>
     <b>Support incremental data copy in DistCp</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5898">MAPREDUCE-5898</a>.
     Major bug reported by Uma Maheswara Rao G and fixed by Yi Liu (distcp)<br>
     <b>distcp to support preserving HDFS extended attributes(XAttrs)</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5896">MAPREDUCE-5896</a>.
     Major improvement reported by Sandy Ryza and fixed by Sandy Ryza <br>
     <b>InputSplits should indicate which locations have the block cached in memory</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5895">MAPREDUCE-5895</a>.
     Major bug reported by Kousuke Saruta and fixed by Kousuke Saruta (client)<br>
     <b>FileAlreadyExistsException was thrown : Temporary Index File can not be cleaned up because OutputStream doesn't close properly</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5888">MAPREDUCE-5888</a>.
     Major bug reported by Jason Lowe and fixed by Jason Lowe (mr-am)<br>
     <b>Failed job leaves hung AM after it unregisters </b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5886">MAPREDUCE-5886</a>.
     Minor improvement reported by Chris Nauroth and fixed by Chris Nauroth (examples)<br>
     <b>Allow wordcount example job to accept multiple input paths.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5884">MAPREDUCE-5884</a>.
     Major bug reported by Mohammad Kamrul Islam and fixed by Mohammad Kamrul Islam (jobhistoryserver , security)<br>
     <b>History server uses short user name when canceling tokens</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5874">MAPREDUCE-5874</a>.
     Major bug reported by Ravi Prakash and fixed by Tsuyoshi OZAWA (documentation)<br>
     <b>Creating MapReduce REST API section</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5868">MAPREDUCE-5868</a>.
     Major bug reported by Jason Lowe and fixed by Akira AJISAKA (test)<br>
     <b>TestPipeApplication causing nightly build to fail</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5862">MAPREDUCE-5862</a>.
     Critical bug reported by bc Wong and fixed by bc Wong <br>
     <b>Line records longer than 2x split size aren't handled correctly</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5861">MAPREDUCE-5861</a>.
     Minor improvement reported by Ted Yu and fixed by Tsuyoshi OZAWA <br>
     <b>finishedSubMaps field in LocalContainerLauncher does not need to be volatile</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5852">MAPREDUCE-5852</a>.
     Minor test reported by Chris Nauroth and fixed by Chris Nauroth (test)<br>
     <b>Prepare MapReduce codebase for JUnit 4.11.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5846">MAPREDUCE-5846</a>.
     Major bug reported by Nathan Roberts and fixed by Nathan Roberts (tools/rumen)<br>
     <b>Rumen doesn't understand JobQueueChangedEvent</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5844">MAPREDUCE-5844</a>.
     Major bug reported by Maysam Yabandeh and fixed by Maysam Yabandeh <br>
     <b>Add a configurable delay to reducer-preemption</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5837">MAPREDUCE-5837</a>.
     Critical bug reported by Haohui Mai and fixed by Haohui Mai <br>
     <b>MRAppMaster fails when checking on uber mode</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5836">MAPREDUCE-5836</a>.
     Trivial bug reported by Akira AJISAKA and fixed by Akira AJISAKA <br>
     <b>Fix typo in RandomTextWriter</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5834">MAPREDUCE-5834</a>.
     Major bug reported by Mit Desai and fixed by Mit Desai <br>
     <b>TestGridMixClasses tests timesout on branch-2</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5825">MAPREDUCE-5825</a>.
     Major improvement reported by Gera Shegalov and fixed by Gera Shegalov (mr-am)<br>
     <b>Provide diagnostics for reducers killed during ramp down</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5821">MAPREDUCE-5821</a>.
     Major bug reported by Todd Lipcon and fixed by Todd Lipcon (performance , task)<br>
     <b>IFile merge allocates new byte array for every value</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5814">MAPREDUCE-5814</a>.
     Major bug reported by Gera Shegalov and fixed by Gera Shegalov (mrv2)<br>
     <b>fat jar with *-default.xml may fail when mapreduce.job.classloader=true.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5812">MAPREDUCE-5812</a>.
     Major improvement reported by Mohammad Kamrul Islam and fixed by Mohammad Kamrul Islam (mr-am)<br>
     <b> Make job context available to OutputCommitter.isRecoverySupported()</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5809">MAPREDUCE-5809</a>.
     Major improvement reported by Chris Nauroth and fixed by Chris Nauroth (distcp)<br>
     <b>Enhance distcp to support preserving HDFS ACLs.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5804">MAPREDUCE-5804</a>.
     Major test reported by Mit Desai and fixed by Mit Desai <br>
     <b>TestMRJobsWithProfiler#testProfiler timesout</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5790">MAPREDUCE-5790</a>.
     Blocker bug reported by Andrew Wang and fixed by Gera Shegalov <br>
     <b>Default map hprof profile options do not work</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5777">MAPREDUCE-5777</a>.
     Major improvement reported by bc Wong and fixed by zhihai xu <br>
     <b>Support utf-8 text with BOM (byte order marker)</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5775">MAPREDUCE-5775</a>.
     Minor bug reported by Liyin Liang and fixed by jhanver chand sharma <br>
     <b>Remove unnecessary job.setNumReduceTasks in SleepJob.createJob</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5774">MAPREDUCE-5774</a>.
     Trivial improvement reported by Gera Shegalov and fixed by Gera Shegalov (jobhistoryserver)<br>
     <b>Job overview in History UI should list reducer phases in chronological order</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5765">MAPREDUCE-5765</a>.
     Minor bug reported by Jonathan Eagles and fixed by Mit Desai (pipes)<br>
     <b>Update hadoop-pipes examples README</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5759">MAPREDUCE-5759</a>.
     Major bug reported by Sandy Ryza and fixed by Sandy Ryza <br>
     <b>Remove unnecessary conf load in Limits</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5749">MAPREDUCE-5749</a>.
     Major bug reported by shenhong and fixed by Jason Lowe <br>
     <b>TestRMContainerAllocator#testReportedAppProgress Failed</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5713">MAPREDUCE-5713</a>.
     Trivial bug reported by Ben Robie and fixed by Chen He (documentation)<br>
     <b>InputFormat and JobConf JavaDoc Fixes</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5671">MAPREDUCE-5671</a>.
     Major bug reported by Chen He and fixed by Chen He <br>
     <b>NaN can be created by client and assign to Progress</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5665">MAPREDUCE-5665</a>.
     Major bug reported by Sandy Ryza and fixed by Anubhav Dhoot (test)<br>
     <b>Add audience annotations to MiniMRYarnCluster and MiniMRCluster</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5652">MAPREDUCE-5652</a>.
     Major bug reported by Karthik Kambatla and fixed by Jason Lowe <br>
     <b>NM Recovery. ShuffleHandler should handle NM restarts</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5642">MAPREDUCE-5642</a>.
     Minor test reported by Chuan Liu and fixed by Chuan Liu (test)<br>
     <b>TestMiniMRChildTask fails on Windows</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5639">MAPREDUCE-5639</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Port DistCp2 document to trunk</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5638">MAPREDUCE-5638</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Port Hadoop Archives document to trunk</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5637">MAPREDUCE-5637</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Convert Hadoop Streaming document to APT</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5636">MAPREDUCE-5636</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Convert MapReduce Tutorial document to APT</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5517">MAPREDUCE-5517</a>.
     Minor bug reported by Siqi Li and fixed by Siqi Li <br>
     <b>enabling uber mode with 0 reducer still requires mapreduce.reduce.memory.mb to be less than yarn.app.mapreduce.am.resource.mb</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5456">MAPREDUCE-5456</a>.
     Minor bug reported by Jason Lowe and fixed by Jason Lowe (mrv2 , test)<br>
     <b>TestFetcher.testCopyFromHostExtraBytes is missing</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5402">MAPREDUCE-5402</a>.
     Major improvement reported by David Rosenstrauch and fixed by Tsuyoshi OZAWA (distcp , mrv2)<br>
     <b>DynamicInputFormat should allow overriding of MAX_CHUNKS_TOLERABLE</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5309">MAPREDUCE-5309</a>.
     Major bug reported by Vrushali C and fixed by Rushabh S Shah (jobhistoryserver , mrv2)<br>
     <b>2.0.4 JobHistoryParser can't parse certain failed job history files generated by 2.0.3 history server</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-5014">MAPREDUCE-5014</a>.
     Major improvement reported by Srikanth Sundarrajan and fixed by Srikanth Sundarrajan (distcp)<br>
     <b>Extending DistCp through a custom CopyListing is not possible</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-4937">MAPREDUCE-4937</a>.
     Major bug reported by Jason Lowe and fixed by Eric Payne (mr-am)<br>
     <b>MR AM handles an oversized split metainfo file poorly</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-4282">MAPREDUCE-4282</a>.
     Major task reported by Eli Collins and fixed by Akira AJISAKA (documentation)<br>
     <b>Convert Forrest docs to APT</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/MAPREDUCE-3191">MAPREDUCE-3191</a>.
     Trivial bug reported by Todd Lipcon and fixed by Chen He <br>
     <b>docs for map output compression incorrectly reference SequenceFile</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6752">HDFS-6752</a>.
     Major bug reported by Vinayakumar B and fixed by Vinayakumar B (test)<br>
     <b>Avoid Address bind errors in TestDatanodeConfig#testMemlockLimit </b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6723">HDFS-6723</a>.
     Major bug reported by Ming Ma and fixed by Ming Ma <br>
     <b>New NN webUI no longer displays decommissioned state for dead node</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6717">HDFS-6717</a>.
     Minor sub-task reported by Jeff Hansen and fixed by Brandon Li (nfs)<br>
     <b>Jira HDFS-5804 breaks default nfs-gateway behavior for unsecured config</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6712">HDFS-6712</a>.
     Major bug reported by Arpit Agarwal and fixed by Arpit Agarwal (documentation)<br>
     <b>Document HDFS Multihoming Settings</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6703">HDFS-6703</a>.
     Major bug reported by Abhiraj Butala and fixed by Srikanth Upputuri (nfs)<br>
     <b>NFS: Files can be deleted from a read-only mount</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6696">HDFS-6696</a>.
     Blocker bug reported by Kihwal Lee and fixed by Andrew Wang <br>
     <b>Name node cannot start if the path of a file under construction contains ".snapshot"</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6680">HDFS-6680</a>.
     Major bug reported by Tsz Wo Nicholas Sze and fixed by Tsz Wo Nicholas Sze (namenode)<br>
     <b>BlockPlacementPolicyDefault does not choose favored nodes correctly</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6647">HDFS-6647</a>.
     Blocker bug reported by Aaron T. Myers and fixed by Kihwal Lee (namenode , snapshots)<br>
     <b>Edit log corruption when pipeline recovery occurs for deleted file present in snapshot</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6632">HDFS-6632</a>.
     Major bug reported by Yongjun Zhang and fixed by Yongjun Zhang <br>
     <b>Reintroduce dfs.http.port / dfs.https.port in branch-2</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6631">HDFS-6631</a>.
     Major bug reported by Chris Nauroth and fixed by Liang Xie (hdfs-client , test)<br>
     <b>TestPread#testHedgedReadLoopTooManyTimes fails intermittently.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6622">HDFS-6622</a>.
     Blocker bug reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Rename and AddBlock may race and produce invalid edits</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6620">HDFS-6620</a>.
     Major improvement reported by Uma Maheswara Rao G and fixed by Stephen Chu (namenode)<br>
     <b>Snapshot docs should specify about preserve options with cp command</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6618">HDFS-6618</a>.
     Blocker bug reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>FSNamesystem#delete drops the FSN lock between removing INodes from the tree and deleting them from the inode map</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6614">HDFS-6614</a>.
     Minor test reported by Liang Xie and fixed by Liang Xie (test)<br>
     <b>shorten TestPread run time with a smaller retry timeout setting</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6612">HDFS-6612</a>.
     Minor bug reported by Juan Yu and fixed by Juan Yu <br>
     <b>MiniDFSNNTopology#simpleFederatedTopology(int) always hardcode nameservice ID</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6610">HDFS-6610</a>.
     Minor bug reported by Charles Lamb and fixed by Charles Lamb (test)<br>
     <b>TestShortCircuitLocalRead tests sometimes timeout on slow machines</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6604">HDFS-6604</a>.
     Critical bug reported by Giuseppe Reina and fixed by Colin Patrick McCabe (hdfs-client)<br>
     <b>The short-circuit cache doesn't correctly time out replicas that haven't been used in a while</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6603">HDFS-6603</a>.
     Minor improvement reported by Stephen Chu and fixed by Stephen Chu (test)<br>
     <b>Add XAttr with ACL test</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6601">HDFS-6601</a>.
     Blocker bug reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Issues in finalizing rolling upgrade when there is a layout version change</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6599">HDFS-6599</a>.
     Blocker bug reported by Kihwal Lee and fixed by Daryn Sharp <br>
     <b>2.4 addBlock is 10 to 20 times slower compared to 0.23</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6598">HDFS-6598</a>.
     Trivial bug reported by Yongjun Zhang and fixed by Yongjun Zhang (webhdfs)<br>
     <b>Fix a typo in message issued from explorer.js</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6595">HDFS-6595</a>.
     Minor improvement reported by Benoy Antony and fixed by Benoy Antony (balancer , datanode)<br>
     <b>Configure the maximum threads allowed for balancing on datanodes</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6593">HDFS-6593</a>.
     Minor improvement reported by Jing Zhao and fixed by Jing Zhao (namenode , snapshots)<br>
     <b>Move SnapshotDiffInfo out of INodeDirectorySnapshottable</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6591">HDFS-6591</a>.
     Major bug reported by LiuLei and fixed by Liang Xie (hdfs-client)<br>
     <b>while loop is executed tens of thousands of times  in Hedged  Read</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6587">HDFS-6587</a>.
     Major bug reported by Zhilei Xu and fixed by Zhilei Xu (test)<br>
     <b>Bug in TestBPOfferService can cause test failure</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6583">HDFS-6583</a>.
     Minor bug reported by Haohui Mai and fixed by Haohui Mai (namenode)<br>
     <b>Remove clientNode in FileUnderConstructionFeature</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6580">HDFS-6580</a>.
     Major improvement reported by Zhilei Xu and fixed by Zhilei Xu (namenode)<br>
     <b>FSNamesystem.mkdirsInt should call the getAuditFileInfo() wrapper</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6578">HDFS-6578</a>.
     Major improvement reported by Yongjun Zhang and fixed by Yongjun Zhang <br>
     <b>add toString method to DatanodeStorage for easier debugging</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6572">HDFS-6572</a>.
     Minor bug reported by Charles Lamb and fixed by Charles Lamb (namenode)<br>
     <b>Add an option to the NameNode that prints the software and on-disk image versions</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6563">HDFS-6563</a>.
     Critical bug reported by Aaron T. Myers and fixed by Aaron T. Myers (namenode , snapshots)<br>
     <b>NameNode cannot save fsimage in certain circumstances when snapshots are in use</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6562">HDFS-6562</a>.
     Minor sub-task reported by Haohui Mai and fixed by Haohui Mai (namenode)<br>
     <b>Refactor rename() in FSDirectory</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6559">HDFS-6559</a>.
     Minor bug reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Fix wrong option "dfsadmin -rollingUpgrade start" in the document</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6558">HDFS-6558</a>.
     Trivial improvement reported by Akira AJISAKA and fixed by Chen He <br>
     <b>Missing '\n' in the description of dfsadmin -rollingUpgrade</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6557">HDFS-6557</a>.
     Major sub-task reported by Haohui Mai and fixed by Haohui Mai (namenode)<br>
     <b>Move the reference of fsimage to FSNamesystem</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6556">HDFS-6556</a>.
     Major bug reported by Yi Liu and fixed by Uma Maheswara Rao G (namenode)<br>
     <b>Refine XAttr permissions</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6553">HDFS-6553</a>.
     Major bug reported by Stephen Chu and fixed by Stephen Chu (nfs)<br>
     <b>Add missing DeprecationDeltas for NFS Kerberos configurations</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6552">HDFS-6552</a>.
     Trivial bug reported by Amir Langer and fixed by  (namenode)<br>
     <b>add DN storage to a BlockInfo will not replace the different storage from same DN</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6551">HDFS-6551</a>.
     Major bug reported by Jing Zhao and fixed by Jing Zhao (namenode , snapshots)<br>
     <b>Rename with OVERWRITE option may throw NPE when the target file/directory is a reference INode</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6549">HDFS-6549</a>.
     Major bug reported by Aaron T. Myers and fixed by Aaron T. Myers (nfs)<br>
     <b>Add support for accessing the NFS gateway from the AIX NFS client</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6545">HDFS-6545</a>.
     Critical improvement reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Finalizing rolling upgrade can make NN unavailable for a long duration</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6539">HDFS-6539</a>.
     Major bug reported by Binglin Chang and fixed by Binglin Chang <br>
     <b>test_native_mini_dfs is skipped in hadoop-hdfs/pom.xml</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6535">HDFS-6535</a>.
     Major bug reported by George Wong and fixed by George Wong (namenode)<br>
     <b>HDFS quota update is wrong when file is appended</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6530">HDFS-6530</a>.
     Minor bug reported by Tsz Wo Nicholas Sze and fixed by Tsz Wo Nicholas Sze (documentation)<br>
     <b>Fix Balancer documentation</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6529">HDFS-6529</a>.
     Minor improvement reported by Anubhav Dhoot and fixed by Anubhav Dhoot (hdfs-client)<br>
     <b>Trace logging for RemoteBlockReader2 to identify remote datanode and file being read</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6528">HDFS-6528</a>.
     Minor improvement reported by Stephen Chu and fixed by Stephen Chu (test)<br>
     <b>Add XAttrs to TestOfflineImageViewer</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6527">HDFS-6527</a>.
     Blocker bug reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Edit log corruption due to defered INode removal</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6518">HDFS-6518</a>.
     Major bug reported by Yongjun Zhang and fixed by Andrew Wang <br>
     <b>TestCacheDirectives#testExceedsCapacity should take FSN read lock when accessing pendingCached list</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6507">HDFS-6507</a>.
     Major improvement reported by Zesheng Wu and fixed by Zesheng Wu (tools)<br>
     <b>Improve DFSAdmin to support HA cluster better</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6503">HDFS-6503</a>.
     Minor improvement reported by Zesheng Wu and fixed by Zesheng Wu (tools)<br>
     <b>Fix typo of DFSAdmin restoreFailedStorage</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6500">HDFS-6500</a>.
     Blocker bug reported by Junping Du and fixed by Tsz Wo Nicholas Sze (snapshots)<br>
     <b>Snapshot shouldn't be removed silently after renaming to an existing snapshot</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6499">HDFS-6499</a>.
     Major improvement reported by Yongjun Zhang and fixed by Yongjun Zhang (namenode)<br>
     <b>Use NativeIO#renameTo instead of File#renameTo in FileJournalManager</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6497">HDFS-6497</a>.
     Minor bug reported by Colin Patrick McCabe and fixed by Colin Patrick McCabe (test)<br>
     <b>Make TestAvailableSpaceVolumeChoosingPolicy deterministic</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6493">HDFS-6493</a>.
     Trivial bug reported by Juan Yu and fixed by Juan Yu <br>
     <b>Change dfs.namenode.startup.delay.block.deletion to second instead of millisecond</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6492">HDFS-6492</a>.
     Major improvement reported by Andrew Wang and fixed by Andrew Wang (namenode)<br>
     <b>Support create-time xattrs and atomically setting multiple xattrs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6487">HDFS-6487</a>.
     Major bug reported by Mit Desai and fixed by Mit Desai <br>
     <b>TestStandbyCheckpoint#testSBNCheckpoints is racy</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6486">HDFS-6486</a>.
     Minor task reported by Yi Liu and fixed by Yi Liu (webhdfs)<br>
     <b>Add user doc for XAttrs via WebHDFS.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6480">HDFS-6480</a>.
     Major sub-task reported by Haohui Mai and fixed by Haohui Mai (namenode)<br>
     <b>Move waitForReady() from FSDirectory to FSNamesystem</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6475">HDFS-6475</a>.
     Major bug reported by Yongjun Zhang and fixed by Yongjun Zhang (ha , webhdfs)<br>
     <b>WebHdfs clients fail without retry because incorrect handling of StandbyException</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6472">HDFS-6472</a>.
     Trivial bug reported by Juan Yu and fixed by Juan Yu <br>
     <b>fix typo in webapps/hdfs/explorer.js</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6471">HDFS-6471</a>.
     Major bug reported by Dasha Boudnik and fixed by Dasha Boudnik (test)<br>
     <b>Make moveFromLocal CLI testcases to be non-disruptive</b><br>
     <blockquote>Committed to trunk and merged into branch-2. Thanks Dasha!</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6470">HDFS-6470</a>.
     Major bug reported by Andrew Wang and fixed by Ming Ma <br>
     <b>TestBPOfferService.testBPInitErrorHandling is flaky</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6464">HDFS-6464</a>.
     Major bug reported by Yi Liu and fixed by Yi Liu (webhdfs)<br>
     <b>Support multiple xattr.name parameters for WebHDFS getXAttrs.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6463">HDFS-6463</a>.
     Trivial improvement reported by Aaron T. Myers and fixed by Chris Nauroth (namenode)<br>
     <b>Clarify behavior of AclStorage#createFsPermissionForExtendedAcl in comments.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6462">HDFS-6462</a>.
     Major bug reported by Yesha Vora and fixed by Brandon Li (nfs)<br>
     <b>NFS: fsstat request fails with the secure hdfs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6461">HDFS-6461</a>.
     Trivial bug reported by James Thomas and fixed by James Thomas (datanode)<br>
     <b>Use Time#monotonicNow to compute duration in DataNode#shutDown</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6460">HDFS-6460</a>.
     Minor improvement reported by Yongjun Zhang and fixed by Yongjun Zhang <br>
     <b>Ignore stale and decommissioned nodes in NetworkTopology#sortByDistance</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6453">HDFS-6453</a>.
     Major improvement reported by Liang Xie and fixed by Liang Xie (datanode , namenode)<br>
     <b>use Time#monotonicNow to avoid system clock reset</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6448">HDFS-6448</a>.
     Major improvement reported by Liang Xie and fixed by Liang Xie (hdfs-client)<br>
     <b>BlockReaderLocalLegacy should set socket timeout based on conf.socketTimeout</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6447">HDFS-6447</a>.
     Trivial improvement reported by Allen Wittenauer and fixed by Juan Yu (balancer)<br>
     <b>balancer should timestamp the completion message</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6443">HDFS-6443</a>.
     Minor bug reported by Zesheng Wu and fixed by Zesheng Wu (test)<br>
     <b>Fix MiniQJMHACluster related test failures</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6442">HDFS-6442</a>.
     Minor improvement reported by Zesheng Wu and fixed by Zesheng Wu (test)<br>
     <b>Fix TestEditLogAutoroll and TestStandbyCheckpoints failure caused by port conficts</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6439">HDFS-6439</a>.
     Major bug reported by Brandon Li and fixed by Aaron T. Myers (nfs)<br>
     <b>NFS should not reject NFS requests to the NULL procedure whether port monitoring is enabled or not</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6438">HDFS-6438</a>.
     Major bug reported by Jing Zhao and fixed by Jing Zhao (webhdfs)<br>
     <b>DeleteSnapshot should be a DELETE request in WebHdfs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6435">HDFS-6435</a>.
     Major new feature reported by Aaron T. Myers and fixed by Aaron T. Myers (nfs)<br>
     <b>Add support for specifying a static uid/gid mapping for the NFS gateway</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6433">HDFS-6433</a>.
     Major improvement reported by Benoy Antony and fixed by Benoy Antony (balancer)<br>
     <b>Replace BytesMoved class with AtomicLong</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6432">HDFS-6432</a>.
     Major improvement reported by Suresh Srinivas and fixed by Jing Zhao (namenode , webhdfs)<br>
     <b>Add snapshot related APIs to webhdfs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6430">HDFS-6430</a>.
     Major task reported by Yi Liu and fixed by Yi Liu <br>
     <b>HTTPFS - Implement XAttr support</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6424">HDFS-6424</a>.
     Major bug reported by Ming Ma and fixed by Ming Ma <br>
     <b>blockReport doesn't need to invalidate blocks on SBN</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6423">HDFS-6423</a>.
     Major bug reported by Jing Zhao and fixed by Jing Zhao (namenode)<br>
     <b>Diskspace quota usage should be updated when appending data to partial block</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6422">HDFS-6422</a>.
     Blocker bug reported by Charles Lamb and fixed by Charles Lamb <br>
     <b>getfattr in CLI doesn't throw exception or return non-0 return code when xattr doesn't exist</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6421">HDFS-6421</a>.
     Major bug reported by Jason Lowe and fixed by Mit Desai (libhdfs)<br>
     <b>Fix vecsum.c compile on BSD and some other systems</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6419">HDFS-6419</a>.
     Major test reported by Akira AJISAKA and fixed by Akira AJISAKA <br>
     <b>TestBookKeeperHACheckpoints#TestSBNCheckpoints fails on trunk</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6418">HDFS-6418</a>.
     Blocker bug reported by Steve Loughran and fixed by Tsz Wo Nicholas Sze (hdfs-client)<br>
     <b>Regression: DFS_NAMENODE_USER_NAME_KEY missing in trunk</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6416">HDFS-6416</a>.
     Minor improvement reported by Brandon Li and fixed by Abhiraj Butala (nfs)<br>
     <b>Use Time#monotonicNow in OpenFileCtx and OpenFileCtxCatch to avoid system clock bugs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6409">HDFS-6409</a>.
     Trivial bug reported by Chris Nauroth and fixed by Chen He (namenode)<br>
     <b>Fix typo in log message about NameNode layout version upgrade.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6406">HDFS-6406</a>.
     Major new feature reported by Aaron T. Myers and fixed by Aaron T. Myers (nfs)<br>
     <b>Add capability for NFS gateway to reject connections from unprivileged ports</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6404">HDFS-6404</a>.
     Major bug reported by Alejandro Abdelnur and fixed by Mike Yoder <br>
     <b>HttpFS should use a 000 umask for mkdir and create operations</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6403">HDFS-6403</a>.
     Major improvement reported by Yongjun Zhang and fixed by Yongjun Zhang (datanode , namenode)<br>
     <b>Add metrics for log warnings reported by JVM pauses</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6400">HDFS-6400</a>.
     Critical bug reported by Akira AJISAKA and fixed by Akira AJISAKA (tools)<br>
     <b>Cannot execute "hdfs oiv_legacy"</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6399">HDFS-6399</a>.
     Minor bug reported by Charles Lamb and fixed by Chris Nauroth (documentation , namenode)<br>
     <b>Add note about setfacl in HDFS permissions guide</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6396">HDFS-6396</a>.
     Minor improvement reported by Andrew Wang and fixed by Charles Lamb <br>
     <b>Remove support for ACL feature from INodeSymlink</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6395">HDFS-6395</a>.
     Major bug reported by Andrew Wang and fixed by Yi Liu (namenode)<br>
     <b>Skip checking xattr limits for non-user-visible namespaces</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6381">HDFS-6381</a>.
     Trivial bug reported by Binglin Chang and fixed by Binglin Chang (documentation)<br>
     <b>Fix a typo in INodeReference.java</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6379">HDFS-6379</a>.
     Major bug reported by Alejandro Abdelnur and fixed by Mike Yoder <br>
     <b>HTTPFS - Implement ACLs support</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6378">HDFS-6378</a>.
     Major bug reported by Brandon Li and fixed by Abhiraj Butala (nfs)<br>
     <b>NFS registration should timeout instead of hanging when portmap/rpcbind is not available</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6375">HDFS-6375</a>.
     Major improvement reported by Andrew Wang and fixed by Charles Lamb (namenode)<br>
     <b>Listing extended attributes with the search permission</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6370">HDFS-6370</a>.
     Major bug reported by Haohui Mai and fixed by Haohui Mai (datanode , journal-node , namenode)<br>
     <b>Web UI fails to display in intranet under IE</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6369">HDFS-6369</a>.
     Trivial improvement reported by Ted Yu and fixed by Ted Yu <br>
     <b>Document that BlockReader#available() can return more bytes than are remaining in the block</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6367">HDFS-6367</a>.
     Major bug reported by Yi Liu and fixed by Yi Liu (webhdfs)<br>
     <b>EnumSetParam$Domain#parse fails for parameter containing more than one enum.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6364">HDFS-6364</a>.
     Major bug reported by Benoy Antony and fixed by Benoy Antony (balancer)<br>
     <b>Incorrect check for unknown datanode in Balancer</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6356">HDFS-6356</a>.
     Trivial improvement reported by Tulasi G and fixed by Tulasi G (datanode)<br>
     <b>Fix typo in DatanodeLayoutVersion</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6355">HDFS-6355</a>.
     Major bug reported by Colin Patrick McCabe and fixed by Colin Patrick McCabe <br>
     <b>Fix divide-by-zero, improper use of wall-clock time in BlockPoolSliceScanner</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6351">HDFS-6351</a>.
     Major sub-task reported by Yongjun Zhang and fixed by Yongjun Zhang (hdfs-client)<br>
     <b>Command "hdfs dfs -rm -r" can't remove empty directory</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6345">HDFS-6345</a>.
     Major bug reported by Lenni Kuff and fixed by Andrew Wang (caching)<br>
     <b>DFS.listCacheDirectives() should allow filtering based on cache directive ID</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6337">HDFS-6337</a>.
     Major bug reported by Uma Maheswara Rao G and fixed by Uma Maheswara Rao G (test)<br>
     <b>Setfacl testcase is failing due to dash character in username in TestAclCLI</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6334">HDFS-6334</a>.
     Major improvement reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Client failover proxy provider for IP failover based NN HA</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6330">HDFS-6330</a>.
     Major sub-task reported by Haohui Mai and fixed by Haohui Mai (namenode)<br>
     <b>Move mkdirs() to FSNamesystem</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6328">HDFS-6328</a>.
     Major sub-task reported by Haohui Mai and fixed by Haohui Mai (namenode)<br>
     <b>Clean up dead code in FSDirectory</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6315">HDFS-6315</a>.
     Major sub-task reported by Haohui Mai and fixed by Haohui Mai <br>
     <b>Decouple recording edit logs from FSDirectory</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6312">HDFS-6312</a>.
     Blocker bug reported by Daryn Sharp and fixed by Daryn Sharp (webhdfs)<br>
     <b>WebHdfs HA failover is broken on secure clusters</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6305">HDFS-6305</a>.
     Critical bug reported by Daryn Sharp and fixed by Daryn Sharp (webhdfs)<br>
     <b>WebHdfs response decoding may throw RuntimeExceptions</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6304">HDFS-6304</a>.
     Major improvement reported by Haohui Mai and fixed by Haohui Mai (namenode)<br>
     <b>Consolidate the logic of path resolution in FSDirectory</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6297">HDFS-6297</a>.
     Major improvement reported by Dasha Boudnik and fixed by Dasha Boudnik (test)<br>
     <b>Add CLI testcases to reflect new features of dfs and dfsadmin</b><br>
     <blockquote>Committed to the trunk and branch-2. Thanks Dasha!</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6295">HDFS-6295</a>.
     Major improvement reported by Andrew Wang and fixed by Andrew Wang <br>
     <b>Add "decommissioning" state and node state filtering to dfsadmin</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6294">HDFS-6294</a>.
     Major bug reported by Colin Patrick McCabe and fixed by Colin Patrick McCabe (namenode)<br>
     <b>Use INode IDs to avoid conflicts when a file open for write is renamed</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6293">HDFS-6293</a>.
     Blocker bug reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Issues with OIV processing PB-based fsimages</b><br>
     <blockquote>Set "dfs.namenode.legacy-oiv-image.dir" to an appropriate directory to make standby name node or secondary name node save its file system state in the old fsimage format during checkpointing. This image can be used for offline analysis using the OfflineImageViewer.  Use the "hdfs oiv_legacy" command to process the old fsimage format.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6289">HDFS-6289</a>.
     Critical bug reported by Aaron T. Myers and fixed by Aaron T. Myers (ha)<br>
     <b>HA failover can fail if there are pending DN messages for DNs which no longer exist</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6288">HDFS-6288</a>.
     Minor bug reported by Juan Yu and fixed by Juan Yu <br>
     <b>DFSInputStream Pread doesn't update ReadStatistics</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6287">HDFS-6287</a>.
     Minor test reported by Colin Patrick McCabe and fixed by Colin Patrick McCabe (libhdfs , test)<br>
     <b>Add vecsum test of libhdfs read access times</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6282">HDFS-6282</a>.
     Minor improvement reported by Colin Patrick McCabe and fixed by Colin Patrick McCabe (test)<br>
     <b>re-add testIncludeByRegistrationName</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6281">HDFS-6281</a>.
     Major new feature reported by Aaron T. Myers and fixed by Aaron T. Myers (nfs)<br>
     <b>Provide option to use the NFS Gateway without having to use the Hadoop portmapper</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6279">HDFS-6279</a>.
     Major improvement reported by Haohui Mai and fixed by Haohui Mai <br>
     <b>Create new index page for JN / DN</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6278">HDFS-6278</a>.
     Major improvement reported by Haohui Mai and fixed by Haohui Mai <br>
     <b>Create HTML5-based UI for SNN</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6276">HDFS-6276</a>.
     Major sub-task reported by Suresh Srinivas and fixed by Suresh Srinivas <br>
     <b>Remove unnecessary conditions and null check</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6275">HDFS-6275</a>.
     Major sub-task reported by Suresh Srinivas and fixed by Suresh Srinivas <br>
     <b>Fix warnings - type arguments can be inferred and redudant local variable</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6274">HDFS-6274</a>.
     Major sub-task reported by Suresh Srinivas and fixed by Suresh Srinivas <br>
     <b>Cleanup javadoc warnings in HDFS code</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6273">HDFS-6273</a>.
     Major improvement reported by Arpit Agarwal and fixed by Arpit Agarwal (namenode)<br>
     <b>Config options to allow wildcard endpoints for namenode HTTP and HTTPS servers</b><br>
     <blockquote>HDFS-6273 introduces two new HDFS configuration keys: 
- dfs.namenode.http-bind-host
- dfs.namenode.https-bind-host

The most common use case for these keys is to have the NameNode HTTP (or HTTPS) endpoints listen on all interfaces on multi-homed systems by setting the keys to 0.0.0.0 i.e. INADDR_ANY.

For the systems background on this usage of INADDR_ANY please refer to ip(7) in the Linux Programmer's Manual (web link: http://man7.org/linux/man-pages/man7/ip.7.html).

These keys complement the existing NameNode options:
- dfs.namenode.rpc-bind-host
- dfs.namenode.servicerpc-bind-host</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6270">HDFS-6270</a>.
     Minor bug reported by Benoy Antony and fixed by Benoy Antony <br>
     <b>Secondary namenode status page shows transaction count in bytes</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6269">HDFS-6269</a>.
     Major improvement reported by Eric Payne and fixed by Eric Payne (namenode , webhdfs)<br>
     <b>NameNode Audit Log should differentiate between webHDFS open and HDFS open.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6266">HDFS-6266</a>.
     Major improvement reported by Jing Zhao and fixed by Jing Zhao (snapshots)<br>
     <b>Identify full path for a given INode</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6265">HDFS-6265</a>.
     Minor test reported by Chris Nauroth and fixed by Chris Nauroth (test)<br>
     <b>Prepare HDFS codebase for JUnit 4.11.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6257">HDFS-6257</a>.
     Minor test reported by Ted Yu and fixed by Colin Patrick McCabe (caching)<br>
     <b>TestCacheDirectives#testExceedsCapacity fails occasionally</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6256">HDFS-6256</a>.
     Major improvement reported by Akira AJISAKA and fixed by Akira AJISAKA (tools)<br>
     <b>Clean up ImageVisitor and SpotCheckImageVisitor</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6250">HDFS-6250</a>.
     Major bug reported by Kihwal Lee and fixed by Binglin Chang <br>
     <b>TestBalancerWithNodeGroup.testBalancerWithRackLocality fails</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6243">HDFS-6243</a>.
     Major bug reported by Chris Nauroth and fixed by Chris Nauroth (ha , namenode)<br>
     <b>HA NameNode transition to active or shutdown may leave lingering image transfer thread.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6240">HDFS-6240</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (tools)<br>
     <b>WebImageViewer returns 404 if LISTSTATUS to an empty directory</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6238">HDFS-6238</a>.
     Minor bug reported by Chris Nauroth and fixed by Chris Nauroth (datanode , test)<br>
     <b>TestDirectoryScanner leaks file descriptors.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6230">HDFS-6230</a>.
     Major bug reported by Arpit Agarwal and fixed by Mit Desai (namenode)<br>
     <b>Expose upgrade status through NameNode web UI</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6227">HDFS-6227</a>.
     Major bug reported by Jing Zhao and fixed by Colin Patrick McCabe <br>
     <b>ShortCircuitCache#unref should purge ShortCircuitReplicas whose streams have been closed by java interrupts</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6225">HDFS-6225</a>.
     Major improvement reported by Haohui Mai and fixed by Haohui Mai <br>
     <b>Remove the o.a.h.hdfs.server.common.UpgradeStatusReport</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6224">HDFS-6224</a>.
     Minor test reported by Charles Lamb and fixed by Charles Lamb (test)<br>
     <b>Add a unit test to TestAuditLogger for file permissions passed to logAuditEvent</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6222">HDFS-6222</a>.
     Major bug reported by Daryn Sharp and fixed by Daryn Sharp (webhdfs)<br>
     <b>Remove background token renewer from webhdfs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6219">HDFS-6219</a>.
     Major sub-task reported by Daryn Sharp and fixed by Daryn Sharp (namenode , webhdfs)<br>
     <b>Proxy superuser configuration should use true client IP for address checks</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6218">HDFS-6218</a>.
     Major sub-task reported by Daryn Sharp and fixed by Daryn Sharp (namenode , webhdfs)<br>
     <b>Audit log should use true client IP for proxied webhdfs operations</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6217">HDFS-6217</a>.
     Major sub-task reported by Daryn Sharp and fixed by Daryn Sharp (webhdfs)<br>
     <b>Webhdfs PUT operations may not work via a http proxy</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6216">HDFS-6216</a>.
     Major bug reported by Daryn Sharp and fixed by Daryn Sharp (webhdfs)<br>
     <b>Issues with webhdfs and http proxies</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6215">HDFS-6215</a>.
     Minor bug reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Wrong error message for upgrade</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6214">HDFS-6214</a>.
     Major bug reported by Daryn Sharp and fixed by Daryn Sharp (webhdfs)<br>
     <b>Webhdfs has poor throughput for files &gt;2GB</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6213">HDFS-6213</a>.
     Minor bug reported by Steve Loughran and fixed by Andrew Wang (test)<br>
     <b>TestDataNodeConfig failing on Jenkins runs due to DN web port in use</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6210">HDFS-6210</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (tools)<br>
     <b>Support GETACLSTATUS operation in WebImageViewer</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6194">HDFS-6194</a>.
     Major bug reported by Haohui Mai and fixed by Akira AJISAKA <br>
     <b>Create new tests for ByteRangeInputStream</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6191">HDFS-6191</a>.
     Major improvement reported by Kihwal Lee and fixed by Kihwal Lee (namenode)<br>
     <b>Disable quota checks when replaying edit log.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6190">HDFS-6190</a>.
     Trivial bug reported by Charles Lamb and fixed by Charles Lamb (tools)<br>
     <b>minor textual fixes in DFSClient</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6186">HDFS-6186</a>.
     Major sub-task reported by Suresh Srinivas and fixed by Jing Zhao (namenode)<br>
     <b>Pause deletion of blocks when the namenode starts up</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6181">HDFS-6181</a>.
     Trivial bug reported by Brandon Li and fixed by Brandon Li (documentation , nfs)<br>
     <b>Fix the wrong property names in NFS user guide</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6180">HDFS-6180</a>.
     Blocker bug reported by Travis Thompson and fixed by Haohui Mai <br>
     <b>dead node count / listing is very broken in JMX and old GUI</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6178">HDFS-6178</a>.
     Major bug reported by Ming Ma and fixed by Ming Ma (namenode)<br>
     <b>Decommission on standby NN couldn't finish</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6173">HDFS-6173</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (tools)<br>
     <b>Move the default processor from Ls to Web in OfflineImageViewer</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6170">HDFS-6170</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (tools)<br>
     <b>Support GETFILESTATUS operation in WebImageViewer</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6169">HDFS-6169</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (tools)<br>
     <b>Move the address in WebImageViewer</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6168">HDFS-6168</a>.
     Major improvement reported by Tsz Wo Nicholas Sze and fixed by Tsz Wo Nicholas Sze (hdfs-client)<br>
     <b>Remove deprecated methods in DistributedFileSystem</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6167">HDFS-6167</a>.
     Major improvement reported by Tsz Wo Nicholas Sze and fixed by Tsz Wo Nicholas Sze (hdfs-client)<br>
     <b>Relocate the non-public API classes in the hdfs.client package</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6164">HDFS-6164</a>.
     Major sub-task reported by Haohui Mai and fixed by Haohui Mai (tools)<br>
     <b>Remove lsr in OfflineImageViewer</b><br>
     <blockquote>The offlineimageviewer no longer generates lsr-style outputs. The functionality has been superseded by a tool that takes the fsimage and exposes WebHDFS-like API for user queries.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6162">HDFS-6162</a>.
     Minor sub-task reported by Suresh Srinivas and fixed by Suresh Srinivas <br>
     <b>Format strings should use platform independent line separator</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6160">HDFS-6160</a>.
     Major bug reported by Ted Yu and fixed by Arpit Agarwal (test)<br>
     <b>TestSafeMode occasionally fails</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6159">HDFS-6159</a>.
     Major bug reported by Chen He and fixed by Chen He (test)<br>
     <b>TestBalancerWithNodeGroup.testBalancerWithNodeGroup fails if there is block missing after balancer success</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6158">HDFS-6158</a>.
     Major improvement reported by Haohui Mai and fixed by Haohui Mai <br>
     <b>Clean up dead code for OfflineImageViewer</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6156">HDFS-6156</a>.
     Major bug reported by Haohui Mai and fixed by Shinichi Yamashita <br>
     <b>Simplify the JMX API that provides snapshot information</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6155">HDFS-6155</a>.
     Major sub-task reported by Suresh Srinivas and fixed by Suresh Srinivas <br>
     <b>Fix Boxing/unboxing to parse a primitive findbugs warnings</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6153">HDFS-6153</a>.
     Minor bug reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation , webhdfs)<br>
     <b>Document "fileId" and "childrenNum" fields in the FileStatus Json schema</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6143">HDFS-6143</a>.
     Blocker bug reported by Gera Shegalov and fixed by Gera Shegalov <br>
     <b>WebHdfsFileSystem open should throw FileNotFoundException for non-existing paths</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6125">HDFS-6125</a>.
     Major sub-task reported by Suresh Srinivas and fixed by Suresh Srinivas (test)<br>
     <b>Cleanup unnecessary cast in HDFS code base</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6119">HDFS-6119</a>.
     Minor sub-task reported by Suresh Srinivas and fixed by Suresh Srinivas (namenode)<br>
     <b>FSNamesystem code cleanup</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6112">HDFS-6112</a>.
     Minor bug reported by Aaron T. Myers and fixed by Aaron T. Myers (nfs)<br>
     <b>NFS Gateway docs are incorrect for allowed hosts configuration</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6110">HDFS-6110</a>.
     Major improvement reported by Liang Xie and fixed by Liang Xie (datanode)<br>
     <b>adding more slow action log in critical write path</b><br>
     <blockquote>Log slow i/o.  Set log thresholds in dfsclient and datanode via the below  new configs:

dfs.client.slow.io.warning.threshold.ms (Default 30 seconds)
dfs.datanode.slow.io.warning.threshold.ms (Default 300ms)</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6109">HDFS-6109</a>.
     Major improvement reported by Liang Xie and fixed by Liang Xie (datanode)<br>
     <b>let sync_file_range() system call run in background</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6056">HDFS-6056</a>.
     Major bug reported by Aaron T. Myers and fixed by Brandon Li (nfs)<br>
     <b>Clean up NFS config settings</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-6007">HDFS-6007</a>.
     Minor improvement reported by Masatake Iwasaki and fixed by  (documentation)<br>
     <b>Update documentation about short-circuit local reads</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5978">HDFS-5978</a>.
     Major sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (tools)<br>
     <b>Create a tool to take fsimage and expose read-only WebHDFS API</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5892">HDFS-5892</a>.
     Minor test reported by Ted Yu and fixed by Ted Yu <br>
     <b>TestDeleteBlockPool fails in branch-2</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5865">HDFS-5865</a>.
     Minor sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Update OfflineImageViewer document</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5693">HDFS-5693</a>.
     Major improvement reported by Ming Ma and fixed by Ming Ma (namenode)<br>
     <b>Few NN metrics data points were collected via JMX when NN is under heavy load</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5683">HDFS-5683</a>.
     Major improvement reported by Andrew Wang and fixed by Abhiraj Butala (namenode)<br>
     <b>Better audit log messages for caching operations</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5669">HDFS-5669</a>.
     Major bug reported by Vinayakumar B and fixed by Vinayakumar B (datanode)<br>
     <b>Storage#tryLock() should check for null before logging successfull message</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5591">HDFS-5591</a>.
     Minor bug reported by Andrew Wang and fixed by Charles Lamb (namenode)<br>
     <b>Checkpointing should use monotonic time when calculating period</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5522">HDFS-5522</a>.
     Major bug reported by Kihwal Lee and fixed by Rushabh S Shah <br>
     <b>Datanode disk error check may be incorrectly skipped</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5411">HDFS-5411</a>.
     Minor sub-task reported by Robert Rati and fixed by Rakesh R <br>
     <b>Update Bookkeeper dependency to 4.2.3</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5409">HDFS-5409</a>.
     Minor test reported by Chris Nauroth and fixed by Chris Nauroth (test)<br>
     <b>TestOfflineEditsViewer#testStored fails on Windows due to CRLF line endings in editsStored.xml from git checkout</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5381">HDFS-5381</a>.
     Minor improvement reported by Colin Patrick McCabe and fixed by Benoy Antony (federation)<br>
     <b>ExtendedBlock#hashCode should use both blockId and block pool ID</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5196">HDFS-5196</a>.
     Minor improvement reported by Haohui Mai and fixed by Shinichi Yamashita (snapshots)<br>
     <b>Provide more snapshot information in WebUI</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-5168">HDFS-5168</a>.
     Critical improvement reported by Nikola Vujic and fixed by Nikola Vujic (namenode)<br>
     <b>BlockPlacementPolicy does not work for cross node group dependencies</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-4913">HDFS-4913</a>.
     Major bug reported by Stephen Chu and fixed by Colin Patrick McCabe (fuse-dfs)<br>
     <b>Deleting file through fuse-dfs when using trash fails requiring root permissions</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-4909">HDFS-4909</a>.
     Blocker bug reported by Ralph Castain and fixed by Colin Patrick McCabe (datanode , journal-node , namenode)<br>
     <b>Avoid protocol buffer RPC namespace clashes</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-4667">HDFS-4667</a>.
     Major sub-task reported by Jing Zhao and fixed by Jing Zhao (namenode)<br>
     <b>Capture renamed files/directories in snapshot diff report</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-4286">HDFS-4286</a>.
     Major sub-task reported by Vinayakumar B and fixed by Rakesh R <br>
     <b>Changes from BOOKKEEPER-203 broken capability of including bookkeeper-server jar in hidden package of BKJM</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-4221">HDFS-4221</a>.
     Major sub-task reported by Uma Maheswara Rao G and fixed by Rakesh R (ha)<br>
     <b>Remove the format limitation point from BKJM documentation as HDFS-3810 closed</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-3848">HDFS-3848</a>.
     Major bug reported by Hooman Peiro Sajjad and fixed by Chen He (namenode)<br>
     <b>A Bug in recoverLeaseInternal method of FSNameSystem class</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-3828">HDFS-3828</a>.
     Major bug reported by Andy Isaacson and fixed by Andy Isaacson <br>
     <b>Block Scanner rescans blocks too frequently</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-3493">HDFS-3493</a>.
     Major bug reported by J.Andreina and fixed by Juan Yu <br>
     <b>Invalidate excess corrupted blocks as long as minimum replication is satisfied</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-3087">HDFS-3087</a>.
     Critical bug reported by Kihwal Lee and fixed by Rushabh S Shah (namenode)<br>
     <b>Decomissioning on NN restart can complete without blocks being replicated</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-2949">HDFS-2949</a>.
     Major improvement reported by Todd Lipcon and fixed by Rushabh S Shah (ha , namenode)<br>
     <b>HA: Add check to active state transition to prevent operator-induced split brain</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HDFS-2006">HDFS-2006</a>.
     Major improvement reported by dhruba borthakur and fixed by Yi Liu (namenode)<br>
     <b>ability to support storing extended attributes per file</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10896">HADOOP-10896</a>.
     Blocker improvement reported by Karthik Kambatla and fixed by Karthik Kambatla (documentation)<br>
     <b>Update compatibility doc to capture visibility of un-annotated classes/ methods</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10894">HADOOP-10894</a>.
     Minor sub-task reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Fix dead link in ToolRunner documentation</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10890">HADOOP-10890</a>.
     Major bug reported by Yongjun Zhang and fixed by Yongjun Zhang <br>
     <b>TestDFVariations.testMount fails intermittently</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10872">HADOOP-10872</a>.
     Major bug reported by Yongjun Zhang and fixed by Yongjun Zhang (fs)<br>
     <b>TestPathData fails intermittently with "Mkdirs failed to create d1"</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10864">HADOOP-10864</a>.
     Minor sub-task reported by Allen Wittenauer and fixed by Akira AJISAKA (documentation)<br>
     <b>Tool documentenation is broken</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10821">HADOOP-10821</a>.
     Blocker task reported by Akira AJISAKA and fixed by Andrew Wang <br>
     <b>Prepare the release notes for Hadoop 2.5.0</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10801">HADOOP-10801</a>.
     Major bug reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Fix dead link in site.xml</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10782">HADOOP-10782</a>.
     Trivial improvement reported by Jingguo Yao and fixed by Jingguo Yao <br>
     <b>Typo in DataChecksum classs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10767">HADOOP-10767</a>.
     Trivial improvement reported by Chris Nauroth and fixed by Chris Nauroth (fs)<br>
     <b>Clean up unused code in Ls shell command.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10754">HADOOP-10754</a>.
     Trivial test reported by Chris Nauroth and fixed by Chris Nauroth (ha , test)<br>
     <b>Reenable several HA ZooKeeper-related tests on Windows.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10747">HADOOP-10747</a>.
     Minor improvement reported by Chris Nauroth and fixed by Chris Nauroth (ipc)<br>
     <b>Support configurable retries on SASL connection failures in RPC client.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10746">HADOOP-10746</a>.
     Major bug reported by Jinghui Wang and fixed by Jinghui Wang (test)<br>
     <b>TestSocketIOWithTimeout#testSocketIOWithTimeout fails on Power PC </b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10739">HADOOP-10739</a>.
     Major bug reported by Jason Lowe and fixed by chang li (fs)<br>
     <b>Renaming a file into a directory containing the same filename results in a confusing I/O error</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10716">HADOOP-10716</a>.
     Critical bug reported by Daryn Sharp and fixed by Rushabh S Shah (conf , fs)<br>
     <b>Cannot use more than 1 har filesystem</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10715">HADOOP-10715</a>.
     Minor task reported by Ted Yu and fixed by  <br>
     <b>Remove public GraphiteSink#setWriter()</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10711">HADOOP-10711</a>.
     Major bug reported by Robert Kanter and fixed by Robert Kanter (security)<br>
     <b>Cleanup some extra dependencies from hadoop-auth</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10710">HADOOP-10710</a>.
     Major bug reported by Alejandro Abdelnur and fixed by Juan Yu (security)<br>
     <b>hadoop.auth cookie is not properly constructed according to RFC2109</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10702">HADOOP-10702</a>.
     Minor bug reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>KerberosAuthenticationHandler does not log the principal names correctly</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10701">HADOOP-10701</a>.
     Major bug reported by Premchandra Preetham Kukillaya and fixed by Harsh J (nfs)<br>
     <b>NFS should not validate the access premission only based on the user's primary group</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10699">HADOOP-10699</a>.
     Major bug reported by Kirill A. Korinskiy and fixed by Binglin Chang <br>
     <b>Fix build native library on mac osx</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10691">HADOOP-10691</a>.
     Minor improvement reported by Lei (Eddy) Xu and fixed by Lei (Eddy) Xu (tools)<br>
     <b>Improve the readability of 'hadoop fs -help'</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10688">HADOOP-10688</a>.
     Major improvement reported by Sandy Ryza and fixed by Sandy Ryza (fs)<br>
     <b>Expose thread-level FileSystem StatisticsData</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10686">HADOOP-10686</a>.
     Major bug reported by Abraham Elmahrek and fixed by Abraham Elmahrek <br>
     <b>Writables are not always configured</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10683">HADOOP-10683</a>.
     Major bug reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Users authenticated with KERBEROS are recorded as being authenticated with SIMPLE</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10678">HADOOP-10678</a>.
     Minor bug reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>SecurityUtil has unnecessary synchronization on collection used for only tests</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10674">HADOOP-10674</a>.
     Major improvement reported by Tsz Wo Nicholas Sze and fixed by Tsz Wo Nicholas Sze (performance , util)<br>
     <b>Rewrite the PureJavaCrc32 loop for performance improvement</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10666">HADOOP-10666</a>.
     Minor improvement reported by Henry Saputra and fixed by Henry Saputra (documentation)<br>
     <b>Remove Copyright /d/d/d/d Apache Software Foundation from the source files license header</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10665">HADOOP-10665</a>.
     Minor improvement reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Make Hadoop Authentication Handler loads case in-sensitive</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10664">HADOOP-10664</a>.
     Major bug reported by Chen He and fixed by Aaron T. Myers <br>
     <b>TestNetUtils.testNormalizeHostName fails</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10660">HADOOP-10660</a>.
     Major bug reported by Ted Yu and fixed by Chen He <br>
     <b>GraphiteSink should implement Closeable</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10659">HADOOP-10659</a>.
     Minor sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Refactor AccessControlList to reuse utility functions and to improve performance</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10658">HADOOP-10658</a>.
     Major bug reported by Alejandro Abdelnur and fixed by Alejandro Abdelnur (security)<br>
     <b>SSLFactory expects truststores being configured</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10657">HADOOP-10657</a>.
     Major bug reported by Ming Ma and fixed by Ming Ma <br>
     <b>Have RetryInvocationHandler log failover attempt at INFO level</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10656">HADOOP-10656</a>.
     Major bug reported by Brandon Li and fixed by Brandon Li (security)<br>
     <b>The password keystore file is not picked by LDAP group mapping</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10652">HADOOP-10652</a>.
     Major sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Refactor Proxyusers to use AccessControlList  </b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10649">HADOOP-10649</a>.
     Major sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Allow overriding the default ACL for service authorization </b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10647">HADOOP-10647</a>.
     Minor bug reported by Gene Kim and fixed by Gene Kim (fs/swift)<br>
     <b>String Format Exception in SwiftNativeFileSystemStore.java</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10639">HADOOP-10639</a>.
     Major bug reported by Alejandro Abdelnur and fixed by Alejandro Abdelnur (security)<br>
     <b>FileBasedKeyStoresFactory initialization is not using default for SSL_REQUIRE_CLIENT_CERT_KEY</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10638">HADOOP-10638</a>.
     Major bug reported by Manikandan Narayanaswamy and fixed by Manikandan Narayanaswamy (nfs)<br>
     <b>Updating hadoop-daemon.sh to work as expected when nfs is started as a privileged user. </b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10630">HADOOP-10630</a>.
     Major bug reported by Jing Zhao and fixed by Jing Zhao <br>
     <b>Possible race condition in RetryInvocationHandler</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10625">HADOOP-10625</a>.
     Major bug reported by Wangda Tan and fixed by Wangda Tan (conf)<br>
     <b>Configuration: names should be trimmed when putting/getting to properties</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10622">HADOOP-10622</a>.
     Critical bug reported by Jason Lowe and fixed by Gera Shegalov <br>
     <b>Shell.runCommand can deadlock</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10618">HADOOP-10618</a>.
     Minor improvement reported by Akira AJISAKA and fixed by Akira AJISAKA (documentation)<br>
     <b>Remove SingleNodeSetup.apt.vm</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10614">HADOOP-10614</a>.
     Major improvement reported by Xiangrui Meng and fixed by Xiangrui Meng <br>
     <b>CBZip2InputStream is not threadsafe</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10609">HADOOP-10609</a>.
     Major bug reported by Karthik Kambatla and fixed by Karthik Kambatla <br>
     <b>.gitignore should ignore .orig and .rej files</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10602">HADOOP-10602</a>.
     Trivial bug reported by Chris Nauroth and fixed by Akira AJISAKA (documentation)<br>
     <b>Documentation has broken "Go Back" hyperlinks.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10590">HADOOP-10590</a>.
     Major bug reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>ServiceAuthorizationManager  is not threadsafe</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10588">HADOOP-10588</a>.
     Major bug reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Workaround for jetty6 acceptor startup issue</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10585">HADOOP-10585</a>.
     Critical bug reported by Daryn Sharp and fixed by Daryn Sharp (ipc)<br>
     <b>Retry polices ignore interrupted exceptions</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10581">HADOOP-10581</a>.
     Major bug reported by Mit Desai and fixed by Mit Desai <br>
     <b>TestUserGroupInformation#testGetServerSideGroups fails because groups stored in Set and ArrayList are compared</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10572">HADOOP-10572</a>.
     Trivial improvement reported by Harsh J and fixed by Harsh J (nfs)<br>
     <b>Example NFS mount command must pass noacl as it isn't supported by the server yet</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10568">HADOOP-10568</a>.
     Major bug reported by David S. Wang and fixed by David S. Wang (fs/s3)<br>
     <b>Add s3 server-side encryption</b><br>
     <blockquote>s3 server-side encryption is now supported.

To enable this feature, specify the following in your client-side configuration:

name: fs.s3n.server-side-encryption-algorithm
value: AES256</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10566">HADOOP-10566</a>.
     Major sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Refactor proxyservers out of ProxyUsers</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10565">HADOOP-10565</a>.
     Major sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Support IP ranges (CIDR) in  proxyuser.hosts</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10561">HADOOP-10561</a>.
     Major improvement reported by Uma Maheswara Rao G and fixed by Yi Liu (fs)<br>
     <b>Copy command with preserve option should handle Xattrs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10557">HADOOP-10557</a>.
     Major improvement reported by Akira AJISAKA and fixed by Akira AJISAKA (fs)<br>
     <b>FsShell -cp -pa option for preserving extended ACLs</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10556">HADOOP-10556</a>.
     Major improvement reported by Alejandro Abdelnur and fixed by Alejandro Abdelnur (security)<br>
     <b>Add toLowerCase support to auth_to_local rules for service name</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10549">HADOOP-10549</a>.
     Major improvement reported by Gera Shegalov and fixed by Gera Shegalov (conf)<br>
     <b>MAX_SUBST and varPat should be final in Configuration.java</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10547">HADOOP-10547</a>.
     Major bug reported by Jason Dere and fixed by Benoy Antony (security)<br>
     <b>Give SaslPropertiesResolver.getDefaultProperties() public scope</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10543">HADOOP-10543</a>.
     Major bug reported by Yongjun Zhang and fixed by Yongjun Zhang <br>
     <b>RemoteException's unwrapRemoteException method failed for PathIOException</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10541">HADOOP-10541</a>.
     Minor bug reported by Ted Yu and fixed by Swarnim Kulkarni (test)<br>
     <b>InputStream in MiniKdc#initKDCServer for minikdc.ldiff is not closed</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10540">HADOOP-10540</a>.
     Major bug reported by Huan Huang and fixed by Arpit Agarwal (tools)<br>
     <b>Datanode upgrade in Windows fails with hardlink error.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10539">HADOOP-10539</a>.
     Minor improvement reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Provide backward compatibility for ProxyUsers.authorize() call</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10535">HADOOP-10535</a>.
     Minor improvement reported by Jing Zhao and fixed by Jing Zhao <br>
     <b>Make the retry numbers in ActiveStandbyElector configurable</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10533">HADOOP-10533</a>.
     Minor bug reported by Benjamin Kim and fixed by Steve Loughran (fs/s3)<br>
     <b>S3 input stream NPEs in MapReduce jon</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10531">HADOOP-10531</a>.
     Major bug reported by Sebastien Barrier and fixed by Sebastien Barrier <br>
     <b>hadoop-config.sh - bug in --hosts argument</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10526">HADOOP-10526</a>.
     Minor bug reported by SreeHari and fixed by Rushabh S Shah <br>
     <b>Chance for Stream leakage in CompressorStream</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10517">HADOOP-10517</a>.
     Minor bug reported by Ted Yu and fixed by Ted Yu (test , util)<br>
     <b>InputStream is not closed in two methods of JarFinder</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10514">HADOOP-10514</a>.
     Major new feature reported by Uma Maheswara Rao G and fixed by Yi Liu (fs)<br>
     <b>Common side changes to support  HDFS extended attributes (HDFS-2006)</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10508">HADOOP-10508</a>.
     Major bug reported by Chris Li and fixed by Chris Li (ipc)<br>
     <b>RefreshCallQueue fails when authorization is enabled</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10503">HADOOP-10503</a>.
     Minor sub-task reported by Steve Loughran and fixed by Chris Nauroth (build)<br>
     <b>Move junit up to v 4.11</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10500">HADOOP-10500</a>.
     Trivial bug reported by Chris Nauroth and fixed by Chris Nauroth (security , test)<br>
     <b>TestDoAsEffectiveUser fails on JDK7 due to failure to reset proxy user configuration.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10499">HADOOP-10499</a>.
     Minor sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Remove unused parameter from ProxyUsers.authorize()</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10498">HADOOP-10498</a>.
     Major new feature reported by Daryn Sharp and fixed by Daryn Sharp (util)<br>
     <b>Add support for proxy server</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10496">HADOOP-10496</a>.
     Major bug reported by Chris Nauroth and fixed by Chris Nauroth (metrics)<br>
     <b>Metrics system FileSink can leak file descriptor.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10495">HADOOP-10495</a>.
     Trivial bug reported by Chris Nauroth and fixed by Chris Nauroth (fs , test)<br>
     <b>TestFileUtil fails on Windows due to bad permission assertions.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10489">HADOOP-10489</a>.
     Major bug reported by Jing Zhao and fixed by Robert Kanter <br>
     <b>UserGroupInformation#getTokens and UserGroupInformation#addToken can lead to ConcurrentModificationException</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10479">HADOOP-10479</a>.
     Major sub-task reported by Haohui Mai and fixed by Swarnim Kulkarni <br>
     <b>Fix new findbugs warnings in hadoop-minikdc</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10475">HADOOP-10475</a>.
     Major bug reported by Arpit Gupta and fixed by Jing Zhao (security)<br>
     <b>ConcurrentModificationException in AbstractDelegationTokenSelector.selectToken()</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10471">HADOOP-10471</a>.
     Major sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Reduce the visibility of constants in ProxyUsers</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10468">HADOOP-10468</a>.
     Blocker bug reported by Haohui Mai and fixed by Akira AJISAKA <br>
     <b>TestMetricsSystemImpl.testMultiThreadedPublish fails intermediately</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10467">HADOOP-10467</a>.
     Major sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Enable proxyuser specification to support list of users in addition to list of groups.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10462">HADOOP-10462</a>.
     Major bug reported by Akira AJISAKA and fixed by Akira AJISAKA <br>
     <b>DF#getFilesystem is not parsing the command output</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10459">HADOOP-10459</a>.
     Major bug reported by Yongjun Zhang and fixed by Yongjun Zhang (tools/distcp)<br>
     <b>distcp V2 doesn't preserve root dir's attributes when -p is specified</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10458">HADOOP-10458</a>.
     Minor improvement reported by Steve Loughran and fixed by Steve Loughran (fs)<br>
     <b>swifts should throw FileAlreadyExistsException on attempt to overwrite file</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10454">HADOOP-10454</a>.
     Major improvement reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Provide FileContext version of har file system</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10451">HADOOP-10451</a>.
     Trivial improvement reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Remove unused field and imports from SaslRpcServer</b><br>
     <blockquote>SaslRpcServer.SASL_PROPS is removed.
Any use of this variable  should be replaced with the following code: 
SaslPropertiesResolver saslPropsResolver = SaslPropertiesResolver.getInstance(conf); 
Map&lt;String, String&gt; sasl_props = saslPropsResolver.getDefaultProperties();</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10448">HADOOP-10448</a>.
     Major sub-task reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Support pluggable mechanism to specify proxy user settings</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10442">HADOOP-10442</a>.
     Blocker bug reported by Kihwal Lee and fixed by Kihwal Lee <br>
     <b>Group look-up can cause segmentation fault when certain JNI-based mapping module is used.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10439">HADOOP-10439</a>.
     Major sub-task reported by Haohui Mai and fixed by Haohui Mai (build)<br>
     <b>Fix compilation error in branch-2 after HADOOP-10426</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10426">HADOOP-10426</a>.
     Minor sub-task reported by Tsz Wo Nicholas Sze and fixed by Tsz Wo Nicholas Sze (fs)<br>
     <b>CreateOpts.getOpt(..) should declare with generic type argument</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10419">HADOOP-10419</a>.
     Minor bug reported by Steve Loughran and fixed by Steve Loughran (fs)<br>
     <b>BufferedFSInputStream NPEs on getPos() on a closed stream</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10418">HADOOP-10418</a>.
     Major bug reported by Aaron T. Myers and fixed by Aaron T. Myers (security)<br>
     <b>SaslRpcClient should not assume that remote principals are in the default_realm</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10414">HADOOP-10414</a>.
     Major bug reported by Joey Echeverria and fixed by Joey Echeverria (conf)<br>
     <b>Incorrect property name for RefreshUserMappingProtocol in hadoop-policy.xml</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10401">HADOOP-10401</a>.
     Major bug reported by Colin Patrick McCabe and fixed by Akira AJISAKA (util)<br>
     <b>ShellBasedUnixGroupsMapping#getGroups does not always return primary group first</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10383">HADOOP-10383</a>.
     Major improvement reported by Enis Soztutar and fixed by Enis Soztutar <br>
     <b>InterfaceStability annotations should have RetentionPolicy.RUNTIME</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10378">HADOOP-10378</a>.
     Major bug reported by Mit Desai and fixed by Mit Desai <br>
     <b>Typo in help printed by hdfs dfs -help</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10376">HADOOP-10376</a>.
     Minor improvement reported by Chris Li and fixed by Chris Li <br>
     <b>Refactor refresh*Protocols into a single generic refreshConfigProtocol</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10350">HADOOP-10350</a>.
     Major bug reported by Vinayakumar B and fixed by Vinayakumar B <br>
     <b>BUILDING.txt should mention openssl dependency required for hadoop-pipes</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10345">HADOOP-10345</a>.
     Minor improvement reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Sanitize the the inputs (groups and hosts) for the proxyuser configuration</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10342">HADOOP-10342</a>.
     Major bug reported by Larry McCay and fixed by Larry McCay (security)<br>
     <b>Extend UserGroupInformation to return a UGI given a preauthenticated kerberos Subject</b><br>
     <blockquote>Add getUGIFromSubject to leverage an external kerberos authentication</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10332">HADOOP-10332</a>.
     Major bug reported by Daryn Sharp and fixed by Jonathan Eagles <br>
     <b>HttpServer's jetty audit log always logs 200 OK</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10322">HADOOP-10322</a>.
     Major improvement reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>Add ability to read principal names from a keytab</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10312">HADOOP-10312</a>.
     Minor bug reported by Steve Loughran and fixed by Steve Loughran (util)<br>
     <b>Shell.ExitCodeException to have more useful toString</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10279">HADOOP-10279</a>.
     Major sub-task reported by Chris Li and fixed by Chris Li <br>
     <b>Create multiplexer, a requirement for the fair queue</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10251">HADOOP-10251</a>.
     Critical bug reported by Vinayakumar B and fixed by Vinayakumar B (ha)<br>
     <b>Both NameNodes could be in STANDBY State if SNN network is unstable</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10158">HADOOP-10158</a>.
     Critical bug reported by Kihwal Lee and fixed by Daryn Sharp <br>
     <b>SPNEGO should work with multiple interfaces/SPNs.</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-10104">HADOOP-10104</a>.
     Minor sub-task reported by Steve Loughran and fixed by Akira AJISAKA (build)<br>
     <b>Update jackson to 1.9.13</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9968">HADOOP-9968</a>.
     Major improvement reported by Benoy Antony and fixed by Benoy Antony (security)<br>
     <b>ProxyUsers does not work with NetGroups</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9919">HADOOP-9919</a>.
     Major bug reported by Akira AJISAKA and fixed by Akira AJISAKA (conf)<br>
     <b>Update hadoop-metrics2.properties examples to Yarn</b><br>
     <blockquote>Remove MRv1 settings from hadoop-metrics2.properties, add YARN settings instead.</blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9712">HADOOP-9712</a>.
     Minor sub-task reported by Steve Loughran and fixed by  (fs/s3)<br>
     <b>Write contract tests for FTP filesystem, fix places where it breaks</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9711">HADOOP-9711</a>.
     Minor sub-task reported by Steve Loughran and fixed by Steve Loughran (fs/s3)<br>
     <b>Write contract tests for S3Native; fix places where it breaks</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9705">HADOOP-9705</a>.
     Major bug reported by Stephen Chu and fixed by Akira AJISAKA (fs)<br>
     <b>FsShell cp -p does not preserve directory attibutes</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9704">HADOOP-9704</a>.
     Major new feature reported by Chu Tong and fixed by  <br>
     <b>Write metrics sink plugin for Hadoop/Graphite</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9559">HADOOP-9559</a>.
     Major bug reported by Mostafa Elhemali and fixed by Mike Liddell (metrics)<br>
     <b>When metrics system is restarted MBean names get incorrectly flagged as dupes</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9555">HADOOP-9555</a>.
     Major bug reported by Chris Nauroth and fixed by Chris Nauroth (ha)<br>
     <b>HA functionality that uses ZooKeeper may experience inadvertent TCP RST and miss session expiration event due to bug in client connection management</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9495">HADOOP-9495</a>.
     Major improvement reported by Steve Loughran and fixed by Steve Loughran (fs)<br>
     <b>Define behaviour of Seekable.seek(), write tests, fix all hadoop implementations for compliance</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9371">HADOOP-9371</a>.
     Major sub-task reported by Steve Loughran and fixed by Steve Loughran (fs)<br>
     <b>Define Semantics of FileSystem more rigorously</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9361">HADOOP-9361</a>.
     Blocker improvement reported by Steve Loughran and fixed by Steve Loughran (fs , test)<br>
     <b>Strictly define the expected behavior of filesystem APIs and write tests to verify compliance</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-9099">HADOOP-9099</a>.
     Minor bug reported by Ivan Mitic and fixed by Ivan Mitic (test)<br>
     <b>NetUtils.normalizeHostName fails on domains where UnknownHost resolves to an IP address</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-8943">HADOOP-8943</a>.
     Major improvement reported by Kai Zheng and fixed by Kai Zheng (security)<br>
     <b>Support multiple group mapping providers</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-8826">HADOOP-8826</a>.
     Minor bug reported by Robert Joseph Evans and fixed by Mit Desai <br>
     <b>Docs still refer to 0.20.205 as stable line</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-6350">HADOOP-6350</a>.
     Major improvement reported by Hong Tang and fixed by Akira AJISAKA (documentation , metrics)<br>
     <b>Documenting Hadoop metrics</b><br>
     <blockquote></blockquote></li>
<li> <a href="https://issues.apache.org/jira/browse/HADOOP-3679">HADOOP-3679</a>.
     Minor test reported by Chris Douglas and fixed by jay vyas (test)<br>
     <b>calls to junit Assert::assertEquals invert arguments, causing misleading error messages, other minor improvements.</b><br>
     <blockquote></blockquote></li>
</ul>
</body></html>
